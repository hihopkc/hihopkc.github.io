<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>应急响应 | 嘻哈磕碜のBlogs</title><meta name="author" content="hihopkc"><meta name="copyright" content="hihopkc"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="应急响应"><meta name="application-name" content="应急响应"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="应急响应"><meta property="og:url" content="https://hihopkc.github.io/posts/12923.html"><meta property="og:site_name" content="嘻哈磕碜のBlogs"><meta property="og:description" content="什么是应急响应？应急响应对应的英文是“Incident Response”或“Emergency Response”等，通常是指一个组织为了应对各种意外事件发生前所做的准备, 以及在意外事件发生后所采取的措施。 网络安全应急响应是指针对已经发生或可能发生的安全事件进行监控、分析、协调、处理、保护资产"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://hihopkc.github.io/img/default_cover.jpg"><meta property="article:author" content="hihopkc"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://hihopkc.github.io/img/default_cover.jpg"><meta name="description" content="什么是应急响应？应急响应对应的英文是“Incident Response”或“Emergency Response”等，通常是指一个组织为了应对各种意外事件发生前所做的准备, 以及在意外事件发生后所采取的措施。 网络安全应急响应是指针对已经发生或可能发生的安全事件进行监控、分析、协调、处理、保护资产"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://hihopkc.github.io/posts/12923"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"与数百名博主无限进步","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"tianli","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"00af80c1b4c617346c21","Referer":"https://hihopkc.github.io/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: 'https://hihopkc.space/',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: {"apiurl":"https://www.hihopkc.site/"},
  navMusic: false,
  mainTone: undefined,
  authorStatus: {"skills":null},
  algolia: {"appId":"R27EJ0K44Q","apiKey":"2631264c2276b5498f37a67d587bc878","indexName":"Demo","hits":{"per_page":6},"languages":{"input_placeholder":"输入关键词后按下回车查找","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: hihopkc","link":"链接: ","source":"来源: 嘻哈磕碜のBlogs","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#425AEF","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '嘻哈磕碜のBlogs',
  title: '应急响应',
  postAI: 'true',
  pageFillDescription: '什么是应急响应？, 作用和意义, 相关单位, 法律法规, 事件级别, 事件类型, 应急响应模型(PDCERF), 01 准备阶段, 02 检测阶段, 03 抑制阶段, 04 根除阶段, 05 恢复阶段, 06 总结阶段, 团队组建, 安全产品, 安全产品用途分类, 防火墙（Firewall）, 抗DDoS防火墙, 网闸（GAP）, 虚拟专用网络（VPN）, 入侵检测系统（IDS）, 入侵防御系统（IPS）, WEB应用防火墙, 入侵排查, 系统排查—基本信息, Windows, linux, 用户信息, Windows, linux, 启动项, Windows, linux, 计划任务, Windows, Linux, 进程排查, Windows, 使用tasklist命令, 通过 netstat 进行排查, 使用Powershell进行排查, wmic查询, linux, 服务排查, Windows, linux, 文件痕迹排查, 敏感目录, Windows, 查看用户Recent文件, 预读取文件夹查看, linux, 时间点, Windows, linux, linux特殊文件, webshell, Windows, 日志分析, Windows, 系统日志, 安全性日志, 应用程序日志, 其他日志, 日志分析, linux, 应急响应工具箱, 多引擎在线病毒扫描, 病毒查杀软件, 病毒清除工具, 勒索病毒搜索引擎, Webshell检测工具, 在线沙箱, 安全分析工具什么是应急响应应急响应对应的英文是或等通常是指一个组织为了应对各种意外事件发生前所做的准备以及在意外事件发生后所采取的措施网络安全应急响应是指针对已经发生或可能发生的安全事件进行监控分析协调处理保护资产安全网络安全应急响应主要是为了人们对网络安全有所认识有所准备以便在遇到突发网络安全事件时做到有序应对妥善处理作用和意义未雨绸缪即在事件发生前事先做好准备比如安全合规风险评估制定安全计划安全意识的培训以发布安全通告的方式进行的预警以及各种防范措施亡羊补牢即在事件发生后采取的措施其目的在于把事件造成的损失降到最小这些行动措施可能来自于人也可能来自系统如发现事件发生后系统备份病毒检测后门检测清除病毒或后门隔离系统恢复调查与追踪取证等一系列操作相关单位领导组中国网络安全和信息化领导小组网信办国家互联网信息办公室公安部网警技侦网安刑侦国安国家网络安全应急办公室国家互联网应急中心法律法规年国家网络空间安全战略年网络安全法年网络安全等级保护国家网络安全事件应急预案事件级别特别重大事件红色预警一级响应重大事件橙色预警二级响应较大事件黄色预警三级响应一般事件蓝色预警四级响应事件类型应用安全网页篡改网页挂马系统安全勒索病毒挖矿木马远控后门网络安全攻击攻击流量劫持数据安全数据泄露损坏加密应急响应模型准备阶段检测阶段抑制阶段根除阶段恢复阶段总结阶段准备阶段应急团队建设应急方案制定渗透测试评估安全基线检查检测阶段判断事件类型判断事件级别确定应急方案抑制阶段限制攻击破坏波及的范围同时也是在降低潜在的损失阻断地址网络连接危险主机关闭可疑进程可疑服务删除违规账号危险文件根除阶段通过事件分析找出根源并彻底根除以避免被再次利用增强安全策略全网监控修复应用漏洞系统漏洞补丁更新还原操作系统业务系统恢复阶段把被破环的信息彻底还原到正常运作的状态恢复业务系统恢复用户数据恢复网络通信总结阶段回顾并整合应急响应过程的相关信息进行事后分析总结和修订安全计划政策程序并进行训练以防止入侵的再次发生事件会议总结响应报告输出响应工作优化团队组建内部团队监控组利用各类系统监控查看监控系统日志对应用系统网络数据安全检测响应组应用组系统组设备组研判组溯源分析专家组文档组应急响应方案制定事件报告输出经验总结输出外部团队合作单位安全厂商安全服务团队监管单位网信办公安部安全产品美国将信息安全设备分为类鉴别访问控制入侵监测防火墙公钥基础设施恶意程序代码防护漏洞扫描取证介质清理或擦除中国公安部将信息安全设备分为类操作系统安全数据库安全网络安全病毒防护访问控制加密鉴别中国军用标准分为类物理安全产品平台安全产品网络安全产品数据安全产品用户安全产品管理安全产品安全产品用途分类安全网关类防火墙网闸抗墙负载均衡上网行为管理评估工具类漏洞扫描系统网络分析系统威胁管理类入侵监测系统入侵防御系统应用防火墙网络防毒墙杀毒软件应用监管类堡垒机审计系统防火墙终端安全管理系统防火墙安全运维平台运维管理平台安全加密类加密机三合一身份认证系统文件加密系统防火墙防火墙也称防护墙是由创立者发明它是一个信息安全的防护系统依照特定的规则允许或限制传输的数据通过主要是网络层的安全防护设备防火墙是一个由软件和硬件设备组合而成在内部网和外部网之间专用网与公共网之间构造的保护屏障下一代防火墙即简称是一款可以全面应对应用层威胁的高性能防火墙提供网络层应用层一体化安全防护防火墙主要用于边界安全防护的权限控制和安全域的划分在网络中所谓防火墙是指一种将内部网和公众访问网如分开的方法它实际上是一种隔离技术防火墙是在两个网络通讯时执行的一种访问控制尺度它能允许你同意的人和数据进入你的网络同时将你不同意的人和数据拒之门外最大限度地阻止网络中的黑客来访问你的网络部署于内外网边界和各个区域之间用于权限访问控制和安全域划分抗防火墙全名是分布式拒绝服务攻击的攻击方式有很多种最基本的攻击就是利用合理的服务请求来占用过多的服务资源从而使服务器无法处理合法用户的指令防火墙的独特抗攻击算法高效的主动防御系统可有效防御代理变异僵尸集群变异随机攻击传奇假人攻击论坛假人攻击非协议层攻击等多种未知攻击部署于外网边界前端或将数据引流至过滤引擎最终回流网闸网闸全称安全隔离网闸安全隔离网闸是一种带有多种控制功能专用硬件在电路上切断网络之间的链路层连接并能够在网络间进行安全适度的应用数据交换的网络安全设备相比于防火墙能够对应用数据进行过滤检查防止泄密进行病毒和木马检查特点链路层设备两个主板之间用线连接这个线不使用任何的协议只进行数据的读和写进行数据摆渡传输速率低常用于保密单位科研单位等虚拟专用网络虚拟专用网络在公用网络上建立专用网络进行加密通讯网关通过对数据包的加密和数据包目标地址的转换实现远程访问的隧道协议主要有三种和常用类型有以为基础的技术和基于协议的技术由协议提供隧道安全保障部署在网络应用服务器前端部署模式有单臂模式路由模式透明模式入侵检测系统入侵检测系统简称是一种对网络传输进行即时监视在发现可疑传输时发出警报或者采取主动反应措施的网络安全设备它与其他网络安全设备的不同之处便在于是一种积极主动的安全防护技术依照一定的安全策略通过软硬件对网络系统的运行状况进行监视尽可能发现各种攻击企图攻击行为或者攻击结果以保证网络系统资源的机密性完整性和可用性入侵检测系统部署模式为旁路模式部署在核心交换设备上开放镜像端口分析镜像流量中的数据判别攻击行为一个入侵检测系统分为四个组件事件产生器它的目的是从整个计算环境中获得事件并向系统的其他部分提供此事件事件分析器它经过分析得到数据并产生分析结果响应单元它是对分析结果作出反应的功能单元它可以作出切断连接改变文件属性等强烈反应也可以只是简单的报警事件数据库事件数据库是存放各种中间和最终数据的地方的统称它可以是复杂的数据库也可以是简单的文本文件入侵防御系统入侵防御系统简称位于防火墙和网络设备之间依靠对数据包的检测进行防御检查入网的数据包确定数据包的真正用途然后决定是否允许其进入内网能够监视网络或网络设备的网络资料传输行为的计算机网络安全设备能够即时的中断调整或隔离一些不正常或是具有伤害性的网络资料传输行为防火墙可以拦截低层攻击行为但对应用层的深层攻击行为无能为力是对防火墙的补充分类投入使用的入侵预防系统按其用途进一步可以划分为单机入侵防御系统和网络入侵防御系统两种类型网络入侵防御系统作为网络之间或网络组成部分之间的独立的硬体设备切断交通对过往包裹进行深层检查然后确定是否放行网络入侵防御系统借助病毒特征和协议异常阻止有害代码传播有一些网络入侵防御系统还能够跟踪和标记对可疑代码的应答然后看谁使用这些回答信息而请求连接这样就能更好地确认发生了入侵事件部署服务器区域前端部署模式通常为网桥模式透明模式也有部署为路由模式应用防火墙应用防火墙简称用以解决诸如防火墙一类传统设备束手无策的应用安全问题与传统防火墙不同工作在应用层因此对应用防护具有先天的技术优势对来自应用程序客户端的各类请求进行内容检测和验证确保其安全性与合法性对非法的请求予以实时阻断从而对各类网站站点进行有效防护部署在服务器区域前端专门针对应用进行防应用防火墙部署模式有网桥模式透明模式代理模式并支持双硬件软件入侵排查系统排查进程排查服务排查文件痕迹排查日志分析内存分析流量分析威胁情报系统排查基本信息使用系统信息工具它是诊断工具的更新版本系统信息工具输入命令打开系统摘要信息窗口正在运行的任务系统摘要软件环境正在运行的任务可以看到正在运行的任务名称路径进程等信息服务在系统摘要软件环境服务选项查看服务的名称状态路径等信息系统驱动程序软件环境系统驱动程序可以查看系统驱动程序的名称描述文件等信息加载的模块软件环境加载的模块查看加载的模块的名称路径等信息启动程序软件环境启动程序查看启动程序的命令用户名位置等信息还可以使用命令查看简要信息信息查看的型号主频内核等信息操作系统信息查看当前操作系统信息模块信息查看所有载入系统的模块信息用户信息排查恶意账户命令行输入这种方法看不到隐藏的账户图形界面在计算机管理本地用户和组用户中查看可以查看隐藏账户名称以结尾的是隐藏账户或者通过命令打开图形界面注册表查看运行中输入打开注册表编辑器在下的选项可以访问到子项并查看用户信息查看是否存在隐藏克隆账户使用查看所有用户信息分别表示用户名密码加密用户用户组注释用户主目录默认登录最后显示表示账户状态可登录如果为表示账户状态不可登录分析超级权限账户查询可登录账户为的账户是为的可登录账户如果出现其它为的账户就要重点排查查看可登录的账户查看用户错误的登录信息查看所有用户最后的登录时间查看用户最近登录信息数据源为存放登录成功的信息存放登录失败的信息存放正在登录的信息查看当前用户登录系统情况启动项系统中自启动文件时按照个文件和个核心注册表子键来自动加载程序通过系统配置对话框查看在命令行输入通过注册表查看注册表时操作系统中一个重要的数据库主要用于存储系统必需的信息注册表以分层的组织形式存储数据元素数据项是注册表的基本元素每个数据项下面不但可以存储很多子数据项还可以以键值的形式存储数据此处存放信息可确保资源管理器中执行时打开正确的程序还包含有关拖放规则快捷方法和用户界面信息的更多详细信息包含当前登录系统的用户的配置信息有用户的文件夹屏幕颜色和控制面板的设置包含运行操作系统的计算机硬件特定的信息有系统上安装的驱动器列表以及已安装硬件和应用程序的通用配置包含系统上所有用户配置文件的配置信息有应用程序配置和可视化设置存储有关系统当前配置的信息启动项是恶意病毒实现持久化的常用手段查看文件加下的文件内容查看文件的内容查看文件夹下所有文件的详细信息默认是没有的需要自己创建计划任务计算机管理系统工具任务计划程序任务计划程序库查看任务计划名称状态触发器等信息在输入命令行输入获取任务计划时要求是本地的成员命令输入查看目录下的任务计划文件进程排查通过任务管理器查看可以在查看中选择选择列然后添加映像路径名称和命令行查看更多进程信息使用命令查看进程与服务对应情况对于某些恶意进程查看调用模块的进程可以通进行过滤通过进行排查查看当前网络连接通过定位出通过命令进行程序定位快速定位到端口对应的程序管理员权限使用进行排查进入查询以格式显示数据查看进程然后查看进程的可执行程序查看进程打开的文件如果是恶意进程可杀掉进程然后删除可疑木马木马文件如果无法删除可能文件被加上属性使用文件名查看属性然后使用文件名移除属性然后删除文件如果进程无法删除可疑先查杀守护进程然后再删除通过查看相关资源占用率比较高的进程服务排查打开运行输入命令可打开服务窗口查看所有服务项包括服务名描述状态等查看系统运行服务命令属于的系统的命令如果系统属系如是没有这个命令的所有服务的状态文件痕迹排查对恶意软件常用的敏感路径进行排查在确定了应急响应事件的时间点后对时间点前后的文件进行排查对带有特征的恶意软件进行排查这些特征包括代码关键字或关键函数文件权限特征等敏感目录检查各个盘下的相关目录有些恶意程序释放子体即恶意程序运行时投放出的文件一般会在程序中写好投放的路径常常为临时目录对敏感目录进行检查一般是看临时目录下是否存在异常文件对于一些人工入侵的应急响应事件有时入侵者会下载一些后续攻击的工具系统要重点排查浏览器的历史记录下载文件和信息查看是否由相关的恶意痕迹查看用户文件文件主要存储了最近运行文件的快捷方式可以通过分析最近运行的文件排查可疑文件一般文件在系统中的存储位置用户名或者通过运行输入预读取文件夹查看是预读取文件夹用来存放系统已经访问过的文件的预读取信息扩展名为之所以自动创建文件夹是为了加快系统启动的进程可以保存最近个可执行文件的信息在和系统中可以记录最近个可执行文件一旦建立了映像之后应用软件的装入速度可大幅度提升文件夹的位置为可以在运行对话框中输入或者或者打开常见敏感目录目录和命令目录等经常作为恶意软件下载目录即相关文件被替换的目录以及也经常作为一些后门配置的路径需要重点排查时间点应急响应事件发生后需要先确认事件发生的时间点然后排查时间点前后的文件变动情况从而缩小排查的范围列出攻击日期内新增的文件从而发现相关的恶意软件在系统中输入命令查找相应的文件例如显示对后的创建的文件进行搜索显示之后名字包含网络的文件网络显示后所有访问过的文件以上命令中表示将错误输出重定向到空设备即不输出错误信息对文件的创建时间修改时间访问时间进行排查对于人工入侵的应急响应事件有时攻击者会为了掩饰入侵行为对文档的相应时间进行修改以规避一些排查策略比如攻击者可能通过菜刀这类工具修改时间因此如果文件的相关时间存在明显逻辑问题就需要重点排查很可能是恶意文件比如创建时间为修改时间为通过列出攻击日期内变动的文件可发现相关的恶意文件通过命令可以对某一时间内增加的文件进行查找在指定的目录下查找文件查找块设备目录字符设备管道符号链接普通文件按文件更改时间来查找文件指天以内指天前按文件访问时间来查找按照文件创建时间来查找例如查找一天内新增的文件查找天内新增的文件查看目录按照时间排序查看前条的内容对文件的创建时间修改时间访问时间进行排查使用命令可以查看文件详细信息若修改时间距离应急响应事件日期接近有线性关联说明有可能被篡改特殊文件特殊权限文件查找查找排查可以通过文件流量日志分析基于文件的命名特征和内容特征相对操作性较高例如查找下所有文件例如网站入侵脚本可以通过上述方法筛选之后再进一步排查还可以使用盾等工具对目录下的文件进行规则查询日志分析中日志文件包括系统日志安全性日志及应用程序日志对于应急响应工程师来说这三类日志需要熟练掌握日志位置如下系统日志安全性日志应用程序日志之后日志位置系统日志为安全性日志为应用程序日志为或者打开运行输入系统日志系统日志指系统中的各个组件在运行中产生的各种事件这些事件一般可以分为系统中各种驱动程序在运行中出现的重大问题操作系统的多种组件在运行中出现重大问题及应用软件在运行中出现的重大问题等这些重大问题主要包括重要数据的丢失错误以及系统产生的崩溃行为等安全性日志安全性日志与系统日志不同安全性日志主要记录了各种与安全相关的事件构成该日志的内容主要包括各种登录与退出系统的成功或不成功的信息对系统中各种重要资源进行的各种操作如对系统文件进行创建删除更改等操作应用程序日志应用程序日志主要记录各种应用程序产生的各类事件例如系统中的数据库程序在受到暴力破解攻击时日志会有相关记录该记录中包含对应事件相关的详细信息其他日志在应急响应中经常也会用到日志日志分析日志分析就是在众多日志中找出自己需要的日志通过内置的日志筛选器进行分析使用日志筛选器可以对记录时间事件级别任务类别关键字等信息进行筛选使用对日志进行分析在使用进行日志分析时需要管理员权限常用的命令只获取传统事件日志从传统事件日志和新事件日志技术生成的事件日志中获取事件还会获取事件跟踪生成的日志文件中的事件需要及更高版本的系统还需要及以上版本例如获取安全性日志下事件为登录成功的所有日志信息例如系统中日志一般存放在目录下具体功能如下记录登录进入退出数据交换关机和重启即是一个二进制文件可以使用查看记录与定时任务相关的日志信息记录系统启动后的信息和错误日志记录的访问日志记录系统授权信息包括用户登录和使用的权限机制等记录所有等级用户信息的日志记录的日志记录登录的用户可以使用命令查看记录大多数应用输入的账户和密码以及登录成功与否记录登录系统不成功的账号信息查看邮件相关记录文件可发现对端口的攻击行为当访问异常时及时向当前系统配置的邮箱地址发送报警邮件对系统日志分析主要使用等命令查看最后行日志查看之后的所有日志查询头行的日志查询除了最后条的所有日志其他日志日志的位置日志的位置日志位置默认在目录下代表访问日志代表错误日志若没有在默认路径下则可以到配置文件中查找日志的位置默认在目录下有等几类日志日志的位置在默认情况下有三种日志分别是和的位置是的位置是的位置是数据库日志数据库查看方法如下使用命令可查询日志路径在默认情况下日志文件记录在使用命令查询之前用过的数据库查看方法如下使用命令可查看是否启用日志如果日志已开启则默认路径为使用命令可查看日志位置数据库查看方法如下一般无法直接查看需要登录到在管理日志中进行查看应急响应工具箱多引擎在线病毒扫描使用多个不同的病毒引擎进行扫描检测确认可疑文件是否是恶意代码免费多引擎在线病毒扫描版支持个杀毒引擎一个提供免费的可疑文件分析服务的网站恶意软件扫描系统使用几个反病毒程序进行扫描可疑文件一个免费网站针对计算机病毒手机病毒可疑文件等进行检测和分析病毒查杀软件联网状态下直接下载杀毒软件进行全盘扫描查杀杀毒整合了五大领先查杀引擎杀毒查杀率比较高火绒安全软件一款非常精致的软件包含了火绒剑安全专业人士很好用的分析工具用于检测木马病毒恶意软件和其他恶意威胁的一个开源杀毒引擎检测病毒病毒清除工具无法联网时可使用绿色免安装的病毒清除工具扫描电脑中的所有文件绿色免安装版本具有单机版的所有功能卡巴斯基官方免费绿色版卡巴斯基杀毒软件后门检测工具用于在本地检查后面的工具勒索病毒搜索引擎勒索病毒自救最有力的工具输入病毒名或加密文件后缀名就可以找到解密工具或者了解病毒详情腾讯勒索病毒搜索引擎支持检索支持检索超过种常见勒索病毒勒索病毒搜索引擎支持检索超过上种常见勒索病毒启明勒索病毒搜索引擎超种勒索病毒家族奇安信勒索病毒搜索引擎深信服勒索病毒搜索引擎检测工具网站被入侵时我们需要一款检测工具来帮助我们发现进一步排查系统可能存在的安全漏洞盾查杀百度河马查杀在线沙箱微步云沙箱腾讯哈勃分析系统沙箱云奇安信沙箱微点沙箱魔盾安全分析大圣云沙箱安全分析工具包含一系列免费的系统分析工具如启动项分析工具等一款强大的手工杀毒辅助工具一个免费功能强大的多功能工具可帮助您监视系统资源调试软件和检测恶意软件一个免费的系统安全检测工具注册表对比工具',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-08-01 17:20:13',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202303232356277.png"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">嘻哈磕碜のBlogs</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="wechat" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="alipay" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/ChatGpt/" style="font-size: 1.05rem;">ChatGpt<sup>2</sup></a><a href="/tags/Java/" style="font-size: 1.05rem;">Java<sup>1</sup></a><a href="/tags/MISC/" style="font-size: 1.05rem;">MISC<sup>2</sup></a><a href="/tags/MSF/" style="font-size: 1.05rem;">MSF<sup>1</sup></a><a href="/tags/Navicat/" style="font-size: 1.05rem;">Navicat<sup>1</sup></a><a href="/tags/Web%E5%AE%89%E5%85%A8/" style="font-size: 1.05rem;">Web安全<sup>9</sup></a><a href="/tags/binwalk/" style="font-size: 1.05rem;">binwalk<sup>1</sup></a><a href="/tags/docker/" style="font-size: 1.05rem;">docker<sup>4</sup></a><a href="/tags/hash/" style="font-size: 1.05rem;">hash<sup>1</sup></a><a href="/tags/hydra/" style="font-size: 1.05rem;">hydra<sup>1</sup></a><a href="/tags/java/" style="font-size: 1.05rem;">java<sup>1</sup></a><a href="/tags/john/" style="font-size: 1.05rem;">john<sup>1</sup></a><a href="/tags/mysql/" style="font-size: 1.05rem;">mysql<sup>1</sup></a><a href="/tags/oracle/" style="font-size: 1.05rem;">oracle<sup>1</sup></a><a href="/tags/owasp/" style="font-size: 1.05rem;">owasp<sup>1</sup></a><a href="/tags/phpstudy/" style="font-size: 1.05rem;">phpstudy<sup>1</sup></a><a href="/tags/python/" style="font-size: 1.05rem;">python<sup>1</sup></a><a href="/tags/redis/" style="font-size: 1.05rem;">redis<sup>1</sup></a><a href="/tags/shiro/" style="font-size: 1.05rem;">shiro<sup>1</sup></a><a href="/tags/sql/" style="font-size: 1.05rem;">sql<sup>1</sup></a><a href="/tags/ssrf/" style="font-size: 1.05rem;">ssrf<sup>1</sup></a><a href="/tags/tomcat/" style="font-size: 1.05rem;">tomcat<sup>1</sup></a><a href="/tags/wpscan/" style="font-size: 1.05rem;">wpscan<sup>1</sup></a><a href="/tags/xss/" style="font-size: 1.05rem;">xss<sup>2</sup></a><a href="/tags/%E5%AE%B9%E5%99%A8/" style="font-size: 1.05rem;">容器<sup>1</sup></a><a href="/tags/%E5%BC%B1%E5%8F%A3%E4%BB%A4/" style="font-size: 1.05rem;">弱口令<sup>1</sup></a><a href="/tags/%E6%8A%A4%E7%BD%91/" style="font-size: 1.05rem;">护网<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 1.05rem;">数据库<sup>2</sup></a><a href="/tags/%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/" style="font-size: 1.05rem;">测试工具<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">10</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">14</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">14</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">13</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">13</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" itemprop="url">网络安全</a><i class="anzhiyufont anzhiyu-icon-angle-right post-meta-separator"></i><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/Web%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80/" itemprop="url">Web安全基础</a></span><span class="article-meta tags"></span></div></div><h1 class="post-title" itemprop="name headline">应急响应</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-05-19T13:47:47.000Z" title="发表于 2023-05-19 21:47:47">2023-05-19</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-08-01T09:20:13.165Z" title="更新于 2023-08-01 17:20:13">2023-08-01</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">8.7k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>29分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="应急响应"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为东莞"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>东莞</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/img/default_cover.jpg"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="anzhiyufont anzhiyu-icon-bilibili"></i><div class="ai-title-text">AI-摘要</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><i class="anzhiyufont anzhiyu-icon-circle-dot" title="朗读摘要"></i><div id="ai-tag">Tianli GPT</div></div><div class="ai-explanation">AI初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己 🙈</div><div class="ai-btn-item">生成本文简介 👋</div><div class="ai-btn-item">推荐相关文章 📖</div><div class="ai-btn-item">前往主页 🏠</div><div class="ai-btn-item" id="go-tianli-blog">前往爱发电购买</div></div><script data-pjax src="/js/anzhiyu/ai_abstract.js"></script></div><article class="post-content" id="article-container" itemscope itemtype="https://hihopkc.github.io/posts/12923.html"><header><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" itemprop="url">网络安全</a><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/Web%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80/" itemprop="url">Web安全基础</a><h1 id="CrawlerTitle" itemprop="name headline">应急响应</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">hihopkc</span><time itemprop="dateCreated datePublished" datetime="2023-05-19T13:47:47.000Z" title="发表于 2023-05-19 21:47:47">2023-05-19</time><time itemprop="dateCreated datePublished" datetime="2023-08-01T09:20:13.165Z" title="更新于 2023-08-01 17:20:13">2023-08-01</time></header><h1 id="什么是应急响应？"><a href="#什么是应急响应？" class="headerlink" title="什么是应急响应？"></a>什么是应急响应？</h1><p><strong>应急响应</strong>对应的英文是“Incident Response”或“Emergency Response”等，通常是指一个组织为了应对各种意外事件发生前所做的准备, 以及在意外事件发生后所采取的措施。</p>
<p><strong>网络安全应急响</strong>应是指针对已经发生或可能发生的安全事件进行监控、分析、协调、处理、保护资产安全。网络安全应急响应主要是为了人们对网络安全有所认识、有所准备，以便在遇到突发网络安全事件时做到有序应对、妥善处理。</p>
<h2 id="作用和意义"><a href="#作用和意义" class="headerlink" title="作用和意义"></a>作用和意义</h2><p>未雨绸缪：即在事件发生前事先做好准备，比如安全合规、风险评估、制定安全计划、安全意识的培训、以发布安全通告的方式进行的预警、以及各种防范措施。</p>
<p>亡羊补牢：即在事件发生后采取的措施，其目的在于把事件造成的损失降到最小。这些行动措施可能来自于人，也可能来自系统，如发现事件发生后，系统备份、病毒检测、后门检测、清除病毒或后门、隔离、系统恢复、调查与追踪、取证等一系列操作。</p>
<h2 id="相关单位"><a href="#相关单位" class="headerlink" title="相关单位"></a>相关单位</h2><p>领导组：中国网络安全和信息化领导小组</p>
<p>网信办：国家互联网信息办公室</p>
<p>公安部：网警、技侦、网安、刑侦、国安….</p>
<p>国家网络安全应急办公室</p>
<p>国家互联网应急中心</p>
<h2 id="法律法规"><a href="#法律法规" class="headerlink" title="法律法规"></a>法律法规</h2><p>2016年 国家网络空间安全战略</p>
<p>2017年 网络安全法</p>
<p>2019年 网络安全等级保护2.0</p>
<p>国家网络安全事件应急预案</p>
<p>……</p>
<h2 id="事件级别"><a href="#事件级别" class="headerlink" title="事件级别"></a>事件级别</h2><p>1、特别重大事件</p>
<p>红色预警、一级响应</p>
<p>2、重大事件</p>
<p>橙色预警、二级响应</p>
<p>3、较大事件</p>
<p>黄色预警、三级响应</p>
<p>4、一般事件</p>
<p>蓝色预警、四级响应</p>
<h2 id="事件类型"><a href="#事件类型" class="headerlink" title="事件类型"></a>事件类型</h2><p>1、应用安全</p>
<p>Webshell、网页篡改、网页挂马…</p>
<p>2、系统安全</p>
<p>勒索病毒、挖矿木马、远控后门…</p>
<p>3、网络安全</p>
<p>DDOS攻击、ARP攻击、流量劫持…</p>
<p>4、数据安全</p>
<p>数据泄露、损坏、加密…</p>
<h1 id="应急响应模型-PDCERF"><a href="#应急响应模型-PDCERF" class="headerlink" title="应急响应模型(PDCERF)"></a>应急响应模型(PDCERF)</h1><p>1.准备阶段（Preparation）</p>
<p>2.检测阶段（Detection）</p>
<p>3.抑制阶段（Containment）</p>
<p>4.根除阶段（Eradication）</p>
<p>5.恢复阶段（Recovery）</p>
<p>6.总结阶段（Follow-up）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202305192157743.png" alt="image-20230519215747578"></p>
<h2 id="01-准备阶段"><a href="#01-准备阶段" class="headerlink" title="01 准备阶段"></a>01 准备阶段</h2><blockquote>
<p>应急团队建设<br>应急方案制定<br>渗透测试评估<br>安全基线检查</p>
</blockquote>
<h2 id="02-检测阶段"><a href="#02-检测阶段" class="headerlink" title="02 检测阶段"></a>02 检测阶段</h2><blockquote>
<p>判断事件类型<br>判断事件级别<br>确定应急方案</p>
</blockquote>
<h2 id="03-抑制阶段"><a href="#03-抑制阶段" class="headerlink" title="03 抑制阶段"></a>03 抑制阶段</h2><blockquote>
<p>限制攻击&#x2F;破坏波及的范围，同时也是在降低潜在的损失：<br>阻断：IP地址、网络连接、危险主机….<br>关闭：可疑进程、可疑服务…..<br>删除：违规账号、危险文件….</p>
</blockquote>
<h2 id="04-根除阶段"><a href="#04-根除阶段" class="headerlink" title="04 根除阶段"></a>04 根除阶段</h2><blockquote>
<p>通过事件分析找出根源并彻底根除，以避免被再次利用：<br>增强：安全策略、全网监控….<br>修复：应用漏洞、系统漏洞、补丁更新…..<br>还原：操作系统、业务系统…..</p>
</blockquote>
<h2 id="05-恢复阶段"><a href="#05-恢复阶段" class="headerlink" title="05 恢复阶段"></a>05 恢复阶段</h2><blockquote>
<p>把被破环的信息彻底还原到正常运作的状态：<br>恢复业务系统<br>恢复用户数据<br>恢复网络通信</p>
</blockquote>
<h2 id="06-总结阶段"><a href="#06-总结阶段" class="headerlink" title="06 总结阶段"></a>06 总结阶段</h2><blockquote>
<p>回顾并整合应急响应过程的相关信息，进行事后分析总结和修订安全计划、 政策、程序，并进行训练，以防止入侵的再次发生：<br>事件会议总结<br>响应报告输出<br>响应工作优化</p>
</blockquote>
<h1 id="团队组建"><a href="#团队组建" class="headerlink" title="团队组建"></a>团队组建</h1><blockquote>
<p>内部团队：<br>监控组：利用各类系统监控、查看监控系统日志、对应用&#x2F;系统&#x2F;网络&#x2F;数据安全检测<br>响应组：应用组、系统组、设备组<br>研判组：溯源分析、专家组<br>文档组：应急响应方案制定、事件报告输出、经验总结输出</p>
<p>外部团队：<br>合作单位：安全厂商、安全服务团队<br>监管单位：网信办、公安部</p>
</blockquote>
<h1 id="安全产品"><a href="#安全产品" class="headerlink" title="安全产品"></a>安全产品</h1><p>美国将信息安全设备分为9类：</p>
<blockquote>
<p>鉴别、访问控制、入侵监测、防火墙、公钥基础设施、恶意程序代码防护、漏洞扫描、 取证、介质清理或擦除</p>
</blockquote>
<p>中国公安部将信息安全设备分为7类：</p>
<blockquote>
<p>操作系统安全、数据库安全、网络安全、病毒防护、访问控制、加密、鉴别</p>
</blockquote>
<p>中国军用标准分为6类：</p>
<blockquote>
<p>物理安全产品、平台安全产品、网络安全产品、数据安全产品、用户安全产品、管理安全产品</p>
</blockquote>
<h2 id="安全产品用途分类"><a href="#安全产品用途分类" class="headerlink" title="安全产品用途分类"></a>安全产品用途分类</h2><p>安全网关类：</p>
<blockquote>
<p>防火墙、UTM、网闸、抗DDoS墙、负载均衡、VPN、上网行为管理</p>
</blockquote>
<p>评估工具类：</p>
<blockquote>
<p>漏洞扫描系统、网络分析系统</p>
</blockquote>
<p>威胁管理类：</p>
<blockquote>
<p>入侵监测系统（IDS）、入侵防御系统（IPS）、WEB应用防火墙（WAF）、网络防毒墙、杀毒软件</p>
</blockquote>
<p>应用监管类：</p>
<blockquote>
<p>堡垒机、审计系统、DB防火墙、终端安全管理系统、Mail防火墙、安全运维平台（SOC）、IT运维管理平台</p>
</blockquote>
<p>安全加密类：</p>
<blockquote>
<p>加密机、三合一、身份认证系统、文件加密系统</p>
</blockquote>
<h2 id="防火墙（Firewall）"><a href="#防火墙（Firewall）" class="headerlink" title="防火墙（Firewall）"></a>防火墙（Firewall）</h2><p>防火墙(Firewall )，也称防护墙，是由Check Point创立者发明</p>
<ul>
<li><p>它是一个信息安全的防护系统，依照特定的规则，允许或限制传输的数据通过，主要是网络层的安全防护设备</p>
</li>
<li><p>防火墙是一个由软件和硬件设备组合而成，在内部网和外部网之间、专用网与公共网之间构造的保护屏障</p>
</li>
</ul>
<p>下一代防火墙，即Next Generation Firewall</p>
<ul>
<li>简称NG Firewall，是一款可以全面应对应用层威胁的高性能防火墙，提供网络层应用层一体化安全防护，防火墙主要用于边界安全防护的权限控制和安全域的划分。</li>
</ul>
<p>在网络中，所谓“防火墙”，是指一种将内部网和公众访问网（如Internet)分开的方法，它实际上是一种隔离技术。</p>
<p>防火墙是在两个网络通讯时执行的一种访问控制尺度，它能允许你“同意”的人和数据进入你的网络，同时将你“不同意”的人和数据拒之门外，最大限度地阻止网络中的黑客来访问你的网络。</p>
<p>部署于内、外网边界和各个区域之间，用于权限访问控制和安全域划分</p>
<h2 id="抗DDoS防火墙"><a href="#抗DDoS防火墙" class="headerlink" title="抗DDoS防火墙"></a>抗DDoS防火墙</h2><ul>
<li>DDoS全名是Distribution Denial of service (分布式拒绝服务攻击)</li>
<li>Dos的攻击方式有很多种，最基本的Dos攻击就是利用合理的服务请求来占用过多的服务 资源，从而使服务器无法处理合法用户的指令</li>
<li>DDoS防火墙的独特抗攻击算法，高效的主动防御系统可有效防御Dos&#x2F;DDoS、 SuperDDoS、DrDoS、代理CC、变异CC、僵尸集群CC、UDPFlood、变异UDP、随机UDP、ICMP、IGMP、SYN、SYNFLOOD、ARP攻击，传奇假人攻击、论坛假人攻击、 非TCP&#x2F;IP协议层攻击、等多种未知攻击</li>
<li>部署于外网边界前端，或将数据引流至过滤引擎，最终回流</li>
</ul>
<h2 id="网闸（GAP）"><a href="#网闸（GAP）" class="headerlink" title="网闸（GAP）"></a>网闸（GAP）</h2><ul>
<li>网闸（GAP）全称安全隔离网闸</li>
<li>安全隔离网闸是一种带有多种控制功能专用硬件在电路上切断网络之间的链路层连接 ，并能够在网络间进行安全适度的应用数据交换的网络安全设备</li>
<li>相比于防火墙，能够对应用数据进行过滤检查，防止泄密、进行病毒和木马检查</li>
<li>特点：链路层设备，两个主板，之间用线连接，这个线不使用任何的协议，只进行数据的读和写；进行数据摆渡，传输速率低。常用于保密单位、科研单位等</li>
</ul>
<h2 id="虚拟专用网络（VPN）"><a href="#虚拟专用网络（VPN）" class="headerlink" title="虚拟专用网络（VPN）"></a>虚拟专用网络（VPN）</h2><ul>
<li>VPN(virtual private network)虚拟专用网络，在公用网络上建立专用网络，进行加密通讯，VPN网关通过对数据包的加密和数据包目标地址的转换实现远程访问</li>
<li>VPN的隧道协议主要有三种：PPTP、L2TP和IPSec，常用VPN类型有 SSL VPN(以 HTTPS为基础的VPN技术)和IPSec VPN(基于 IPSec 协议的 VPN 技术，由 IPSec 协议提 供隧道安全保障)</li>
<li>部署在网络、应用、服务器前端，部署模式有单臂模式、路由模式、透明模式</li>
</ul>
<h2 id="入侵检测系统（IDS）"><a href="#入侵检测系统（IDS）" class="headerlink" title="入侵检测系统（IDS）"></a>入侵检测系统（IDS）</h2><p>入侵检测系统(intrusion detection system，简称IDS) 是一种对网络传输进行即时监视， 在发现可疑传输时发出警报或者采取主动反应措施的网络安全设备。它与其他网络安全设备的不同之处便在于，IDS是一种积极主动的安全防护技术。</p>
<p>依照一定的安全策略，通过软、硬件对网络、系统的运行状况进行监视，尽可能发现各种攻击企图、攻击行为或者攻击结果，以保证网络系统资源的机密性、完整性和可用性 。</p>
<p>入侵检测系统部署模式为旁路模式部署，在核心交换设备上开放镜像端口，分析镜像流量中的数据，判别攻击行为。</p>
<p>一个入侵检测系统分为四个组件：</p>
<ul>
<li>事件产生器（Event generators），它的目的是从整个计算环境中获得事件，并向系统的其他部分提供此事件</li>
<li>事件分析器（Event analyzers），它经过分析得到数据，并产生分析结果</li>
<li>响应单元（Response units ），它是对分析结果作出反应的功能单元，它可以作出切断连接、改变文件属性等强烈反应，也可以只是简单的报警</li>
<li>事件数据库（Event databases ）事件数据库是存放各种中间和最终数据的地方的统称， 它可以是复杂的数据库，也可以是简单的文本文件</li>
</ul>
<h2 id="入侵防御系统（IPS）"><a href="#入侵防御系统（IPS）" class="headerlink" title="入侵防御系统（IPS）"></a>入侵防御系统（IPS）</h2><p>入侵防御系统(Intrusion-prevention system，简称IPS) 位于防火墙和网络设备之间，依靠对数据包的检测进行防御（检查入网的数据包，确定数据包的真正用途，然后决定是否允许其进入内网 ）</p>
<p>能够监视网络或网络设备的网络资料传输行为的计算机网络安全设备，能够即时的中断、 调整或隔离一些不正常或是具有伤害性的网络资料传输行为</p>
<p>防火墙可以拦截低层攻击行为，但对应用层的深层攻击行为无能为力，IPS是对防火墙的补充</p>
<p>分类：投入使用的入侵预防系统按其用途进一步可以划分为单机入侵防御系统(HIPS: Hostbased Intrusion Prevension System)和网络入侵防御系统(NIPS: Network Intrusion Prevension System）两种类型</p>
<p>网络入侵防御系统作为网络之间或网络组成部分之间的独立的硬体设备，切断交通，对过往包裹进行深层检查，然后确定是否放行。网络入侵防御系统借助病毒特征和协议异常， 阻止有害代码传播。有一些网络入侵防御系统还能够跟踪和标记对可疑代码的应答，然后看谁使用这些回答信息而请求连接，这样就能更好地确认发生了入侵事件</p>
<p>部署：服务器区域前端，部署模式通常为网桥模式、透明模式，也有部署为路由模式</p>
<h2 id="WEB应用防火墙"><a href="#WEB应用防火墙" class="headerlink" title="WEB应用防火墙"></a>WEB应用防火墙</h2><p>Web应用防火墙(Web Application Firewall，简称WAF) 用以解决诸如防火墙一类传统设备束手无策的Web应用安全问题， 与传统防火墙不同，WAF工作在应用层，因此对 Web应用防护具有先天的技术优势。</p>
<p>WAF对来自Web应用程序客户端的各类请求进行内容检测和验证，确保其安全性与合法性，对非法的请求予以实时阻断，从而对各类网站站点进行有效防护</p>
<p>部署在服务器区域前端，专门针对web应用进行防， Web应用防火墙部署模式有网桥模 式、透明模式、代理模式，并支持双bypass（硬件+软件）</p>
<h1 id="入侵排查"><a href="#入侵排查" class="headerlink" title="入侵排查"></a>入侵排查</h1><blockquote>
<p>系统排查<br>进程排查<br>服务排查<br>文件痕迹排查<br>日志分析<br>内存分析<br>流量分析<br>威胁情报</p>
</blockquote>
<h2 id="系统排查—基本信息"><a href="#系统排查—基本信息" class="headerlink" title="系统排查—基本信息"></a>系统排查—基本信息</h2><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p>使用 Microsoft 系统信息工具（msinfo32.exe)，它是Microsoft Windows NT 诊断工具（Winmsd.exe)的更新版本</p>
<blockquote>
<p>① 系统信息工具：输入 msinfo32 命令，打开系统摘要信息窗口<br>② 正在运行的任务：系统摘要 -&gt;软件环境 -&gt;正在运行的任务，可以看到正在运行的任务名称、路径、进程ID等信息<br>③ 服务：在系统摘要 -&gt;软件环境 -&gt; 服务 选项，查看服务的名称、状态、路径等信息<br>④ 系统驱动程序：软件环境 -&gt; 系统驱动程序，可以查看系统驱动程序的名称、描述、文件等信息<br>⑤ 加载的模块：软件环境 -&gt;加载的模块，查看加载的模块的名称、路径等信息<br>⑥ 启动程序：软件环境 -&gt; 启动程序，查看启动程序的命令、用户名、位置等信息<br>⑦ 还可以使用 systeminfo 命令查看简要信息</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202305192230356.png" alt="image-20230519223025282"></p>
<h3 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h3><p>CPU信息：查看CPU的型号、主频、内核等信息</p>
<blockquote>
<p>lscpu</p>
</blockquote>
<p>操作系统信息：查看当前操作系统信息</p>
<blockquote>
<p>uname -a<br>cat &#x2F;proc&#x2F;version</p>
</blockquote>
<p>模块信息：查看所有载入系统的模块信息</p>
<blockquote>
<p>lsmod</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202305192233813.png" alt="image-20230519223309750"></p>
<h2 id="用户信息"><a href="#用户信息" class="headerlink" title="用户信息"></a>用户信息</h2><h3 id="Windows-1"><a href="#Windows-1" class="headerlink" title="Windows"></a>Windows</h3><p>排查恶意账户</p>
<blockquote>
<p>① 命令行输入：net user，这种方法看不到 $ 隐藏的账户<br>② 图形界面：在计算机管理 -&gt; 本地用户和组 -&gt; 用户 中查看，可以查看隐藏账户，名称以 $ 结尾的是隐藏账户或者通过 lusrmgr.msc 命令，打开图形界面<br>③ 注册表查看：运行 中输入 regedit，打开注册表编辑器，在 HKEY_LOCAL_MACHINE下的 SAM 选项，可以访问到子项并查看用户信息，查看是否存在隐藏克隆账户<br>④ wmic： wmic useraccount get name,sid</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202305192234128.png" alt="image-20230519223447088"></p>
<p>win11使用mimikatz</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">privilege::debug</span><br><span class="line">token::elevate</span><br><span class="line">lsadump::sam</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202305192253442.png" alt="image-20230519225303410"></p>
<h3 id="linux-1"><a href="#linux-1" class="headerlink" title="linux"></a>linux</h3><p>查看所有用户信息： cat &#x2F;etc&#x2F;passwd ，分别表示： “用户名”“密码加密”“用户ID”“用户组ID”“注释”“用户主目录”“默认登录shell”，最后显示 “bin&#x2F;bash”表示账户状态可登录，如果为“sbin&#x2F;nologin”，表示账户状态不可登录</p>
<p>分析超级权限账户：查询可登录账户UID为0的账户，root是UID为0的可登录账户，如果出现其它为0的账户，就要重点排查：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F: &#x27;&#123;if($3==0)print $1&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure>

<p>查看可登录的账户：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd | grep &#x27;bin/bash’</span><br></pre></td></tr></table></figure>

<p>查看用户错误的登录信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lastb</span><br></pre></td></tr></table></figure>

<p>查看所有用户最后的登录时间：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lastlog</span><br></pre></td></tr></table></figure>

<p>查看用户最近登录信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">last</span><br></pre></td></tr></table></figure>

<p>数据源为 &#x2F;var&#x2F;log&#x2F;wtmp 、 &#x2F;var&#x2F;log&#x2F;btmp、 &#x2F;var&#x2F;log&#x2F;utmp。wtmp存放登录成功的信息，btmp存放登录失败的信息，utmp存放正在 登录的信息</p>
<p>查看当前用户登录系统情况：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">who</span><br></pre></td></tr></table></figure>

<h2 id="启动项"><a href="#启动项" class="headerlink" title="启动项"></a>启动项</h2><h3 id="Windows-2"><a href="#Windows-2" class="headerlink" title="Windows"></a>Windows</h3><p>windows系统中自启动文件时按照2个文件和5个核心注册表子键来自动加载程序</p>
<blockquote>
<p>通过“系统配置”对话框查看：在命令行输入 msconfig</p>
<p>通过注册表查看：注册表时操作系统中一个重要的数据库，主要用于存储系统必需的信息</p>
</blockquote>
<p>注册表以分层的组织形式存储数据元素，数据项是注册表的基本元素，每个数据项下面不但可以存储很多子数据项，还可以以键值的形式存储数据</p>
<p>**HKEY_CLASSES_ROOT (HKCR)**：此处存放信息可确保windows资源管理器中执行时打开正确的程序，还包含有关拖放规则、快捷方法和用户界面信息的更多详细信息</p>
<p>**HKEY_CURRENT_USER(HKCU)**： 包含当前登录系统的用户的配置信息，有用户的文件夹 、屏幕颜色和控制面板的设置</p>
<p>**HKEY_LOCAL_MACHINE(HKLM)**： 包含运行操作系统的计算机硬件特定的信息，有系统上安装的驱动器列表以及已安装硬件和应用程序的通用配置</p>
<p>**HKEY_USERS(HKU)**： 包含系统上所有用户配置文件的配置信息，有应用程序配置和可视化设置</p>
<p>**HKEY_CURRENT_CONFIG(HCU)**： 存储有关系统当前配置的信息</p>
<h3 id="linux-2"><a href="#linux-2" class="headerlink" title="linux"></a>linux</h3><p>启动项是恶意病毒实现持久化的常用手段</p>
<p>查看 init.d 文件加下的rc.local 文件内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/init.d/rc.local </span><br></pre></td></tr></table></figure>

<p>查看rc.local 文件的内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/rc.local </span><br></pre></td></tr></table></figure>

<p>查看init.d 文件夹下所有文件的详细信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -alt /etc/init.d : </span><br></pre></td></tr></table></figure>

<p>kali默认是没有rc.local的，需要自己创建</p>
<h2 id="计划任务"><a href="#计划任务" class="headerlink" title="计划任务"></a>计划任务</h2><h3 id="Windows-3"><a href="#Windows-3" class="headerlink" title="Windows"></a>Windows</h3><p>计算机管理 -&gt; 系统工具 -&gt; 任务计划程序 -&gt; 任务计划程序库，查看任务计划名称、状态、触发器等信息</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202305192313781.png" alt="image-20230519231359731"></p>
<p>在powershell输入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get-ScheduledTask</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202305192316620.png" alt="image-20230519231654541"></p>
<p>命令行输入： 获取任务计划时要求是本地Administrators的成员</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">schtasks</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202305192337495.png" alt="image-20230519233701456"></p>
<h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><p>命令输入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">crontab -l </span><br><span class="line">crontab -u root -l</span><br></pre></td></tr></table></figure>

<p>查看 &#x2F;etc 目录下的任务计划文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls /etc/cron*</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202305192337152.png" alt="image-20230519233736121"></p>
<h2 id="进程排查"><a href="#进程排查" class="headerlink" title="进程排查"></a>进程排查</h2><h3 id="Windows-4"><a href="#Windows-4" class="headerlink" title="Windows"></a>Windows</h3><p>通过任务管理器查看，可以在”查看“中选择”选择列“，然后添加”映像路径名称“ 和”命令行“ 查看更多进程信息</p>
<h4 id="使用tasklist命令"><a href="#使用tasklist命令" class="headerlink" title="使用tasklist命令"></a>使用tasklist命令</h4><p>查看进程与服务对应情况 ：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tasklist /svc</span><br></pre></td></tr></table></figure>

<p>对于某些DLL 恶意进程 ：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tasklist /m</span><br></pre></td></tr></table></figure>

<p>查看调用 ntdll.dll 模块的进程 ：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tasklist /m ntdll.dll</span><br></pre></td></tr></table></figure>

<p>可以通 &#x2F;fi 进行过滤：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tasklist /svc /fi &quot;PID eq 2820&quot;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202305192339145.png" alt="image-20230519233958119"></p>
<h4 id="通过-netstat-进行排查"><a href="#通过-netstat-进行排查" class="headerlink" title="通过 netstat 进行排查"></a>通过 netstat 进行排查</h4><p>查看当前网络连接 ：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano | findstr &quot;ESTABLISHED&quot; </span><br></pre></td></tr></table></figure>

<p>通过netstat 定位出PID，通过tasklist 命令进行程序定位</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wmic process where name=&quot;firefox.exe&quot; get processid,executablepath,name </span><br><span class="line"></span><br><span class="line">wmic process where processid=602444 get processid,executablepath,name </span><br></pre></td></tr></table></figure>

<p>快速定位到端口对应的程序（管理员权限）： netstat -anb</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202305192341706.png" alt="image-20230519234126665"></p>
<h4 id="使用Powershell进行排查"><a href="#使用Powershell进行排查" class="headerlink" title="使用Powershell进行排查"></a>使用Powershell进行排查</h4><p>进入Powershell：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get-wmiobject win32_process | select name,processid,parentprocessid,path</span><br></pre></td></tr></table></figure>



<h4 id="wmic查询"><a href="#wmic查询" class="headerlink" title="wmic查询"></a>wmic查询</h4><p>以csv格式显示数据：wmic process list full &#x2F;format:csv</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wmic process get name,parentprocessid,processid /format:csv </span><br><span class="line">wmic process get executablepath,processid /format:csv </span><br><span class="line">wmic process where processid=2020 get executablepath,processid /format:csv </span><br><span class="line">wmic process where name=&quot;httpd.exe&quot; get executablepath,processid /format:csv</span><br></pre></td></tr></table></figure>

<h3 id="linux-3"><a href="#linux-3" class="headerlink" title="linux"></a>linux</h3><p>① 查看进程：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -anptl</span><br></pre></td></tr></table></figure>

<p>② 然后查看3364进程的可执行程序：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -alt /proc/3364 </span><br></pre></td></tr></table></figure>

<p>查看进程打开的文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -p  3364</span><br></pre></td></tr></table></figure>

<p>③ 如果是恶意进程，可杀掉进程：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -9 3364</span><br></pre></td></tr></table></figure>

<p>然后删除可疑木马：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf 木马文件 </span><br></pre></td></tr></table></figure>

<p>④ 如果无法删除，可能文件被加上 i 属性，使用： lsattr 文件名 ，查看属性，然后使用 chattr -i 文件名 ，移除 i 属性，然后删除文件</p>
<p>⑤ 如果进程无法删除，可疑先查杀守护进程，然后再删除</p>
<p>⑥ 通过 top 查看相关资源占用率比较高的进程</p>
<h2 id="服务排查"><a href="#服务排查" class="headerlink" title="服务排查"></a>服务排查</h2><h3 id="Windows-5"><a href="#Windows-5" class="headerlink" title="Windows"></a>Windows</h3><p>打开“运行”，输入 services.msc 命令，可打开 “服务”窗口，查看所有服务项，包括 服务名、描述、状态等</p>
<h3 id="linux-4"><a href="#linux-4" class="headerlink" title="linux"></a>linux</h3><p>查看系统运行服务：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --list</span><br></pre></td></tr></table></figure>

<p>chkconfig命令属于readhat的linux系统的命令。如果系统属debina系如ubuntu是没有这个命令的。</p>
<p>所有服务的状态：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service --status-all</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202305192344265.png" alt="image-20230519234421231"></p>
<h2 id="文件痕迹排查"><a href="#文件痕迹排查" class="headerlink" title="文件痕迹排查"></a>文件痕迹排查</h2><p>对恶意软件常用的敏感路径进行排查</p>
<p>在确定了应急响应事件的时间点后，对时间点前后的文件进行排查</p>
<p>对带有特征的恶意软件进行排查，这些特征包括代码关键字或关键函数，文件权限特征等</p>
<h3 id="敏感目录"><a href="#敏感目录" class="headerlink" title="敏感目录"></a>敏感目录</h3><h4 id="Windows-6"><a href="#Windows-6" class="headerlink" title="Windows"></a>Windows</h4><p>检查各个盘下的 temp（tmp）相关目录：有些恶意程序释放子体（即恶意程序运行时投放出的文件）一般会在程序中写好投放的路径，常常为临时目录。对敏感目录进行检查， 一般是看临时目录下是否存在异常文件</p>
<p>对于一些人工入侵的应急响应事件，有时入侵者会下载一些后续攻击的工具。windows系统要重点排查浏览器的历史记录，下载文件和cookie信息，查看是否由相关的恶意痕迹</p>
<h5 id="查看用户Recent文件"><a href="#查看用户Recent文件" class="headerlink" title="查看用户Recent文件"></a>查看用户Recent文件</h5><p>Recent文件主要存储了最近运行文件的快捷方式，可以通过分析最近运行的文件，排查可疑文件，一般Recent文件在windows系统中的存储位置： C:\Users\Administrator\Recent、C:\Users\用户名\Recent，或者通过“运行”-&gt; 输入 “ recent ”</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202305192357031.png" alt="image-20230519235729996"></p>
<h5 id="预读取文件夹查看"><a href="#预读取文件夹查看" class="headerlink" title="预读取文件夹查看"></a>预读取文件夹查看</h5><p>Prefetch 是预读取文件夹，用来存放系统已经访问过的文件的预读取信息，扩展名为pf，之所以自动创建Prefetch文件夹，是为了加快系统启动的进程。 windows7可以保存最近128个可执行文件的信息，在windows8和windows10系统中可以记录最近1024个可执行文件，一旦建立了映像，之后应用软件的装入速度可大幅度提升。</p>
<p>Prefetch文件夹的位置为 %SystemRoot%\Prefetch\ ，可以在 运行 对话框中输入 prefetch 或者 %SystemRoot%\Prefetch\，或者打开：C:\Windows\Prefetch</p>
<h4 id="linux-5"><a href="#linux-5" class="headerlink" title="linux"></a>linux</h4><p>linux常见敏感目录：</p>
<ul>
<li>&#x2F;tmp 目录和命令目录 &#x2F;usr&#x2F;bin 、 &#x2F;usr&#x2F;sbin等经常作为恶意软件下载目录即相关文件被替换的目录</li>
<li>~&#x2F;.ssh 以及 &#x2F;etc&#x2F;ssh 也经常作为一些后门配置的路径，需要重点排查</li>
</ul>
<h3 id="时间点"><a href="#时间点" class="headerlink" title="时间点"></a>时间点</h3><p>应急响应事件发生后，需要先确认事件发生的时间点，然后排查时间点前、后的文件变动情况，从而缩小排查的范围</p>
<h4 id="Windows-7"><a href="#Windows-7" class="headerlink" title="Windows"></a>Windows</h4><p>列出攻击日期内新增的文件，从而发现相关的恶意软件。在windows系统中，输入命令： forfiles ，查找相应的文件</p>
<p>例如：</p>
<p>显示对 2021&#x2F;11&#x2F;27 后的创建的txt文件进行搜索：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">forfiles /m *.txt /d +2021/11/27 /s /p c:\ /c &quot;cmd /c echo @path @fdate  @ftime&quot; 2&gt;null</span><br></pre></td></tr></table></figure>

<p>显示 2021&#x2F;11&#x2F;1 之后pptx名字包含”网络“的文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">forfiles /m *网络*.pptx /p f:\ /d +2021/11/1 /s /c &quot;cmd /c echo @path  @fdate @ftime&quot; 2&gt;null</span><br></pre></td></tr></table></figure>

<p>显示 2021&#x2F;11&#x2F;27 后所有访问过的文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">forfiles /m *.* /p f:\ /d +2021/11/27 /s /c &quot;cmd /c echo @path @fdate  @ftime&quot; 2&gt;null </span><br></pre></td></tr></table></figure>

<p>以上命令中 2&gt;null 表示将错误输出重定向到空设备，即不输出错误信息。</p>
<p>对文件的创建时间、修改时间、访问时间进行排查，对于人工入侵的应急响应事件，有时攻击者会为了掩饰入侵行为，对文档的相应时间进行修改，以规避一些排查策略，比如攻击者可能通过”菜刀“这类工具修改时间，因此，如果文件的相关时间存在明显逻辑问题 ，就需要重点排查，很可能是恶意文件（比如创建时间为2021，修改时间为2018）</p>
<h4 id="linux-6"><a href="#linux-6" class="headerlink" title="linux"></a>linux</h4><p>通过列出攻击日期内变动的文件，可发现相关的恶意文件，通过 find 命令，可以对某一时间内增加的文件进行查找</p>
<p>find： 在指定的目录下查找文件</p>
<p> -type b&#x2F;d&#x2F;c&#x2F;p&#x2F;l&#x2F;f ：查找块设备、目录、字符设备、管道、符号链接、普通文件</p>
<p> -mtime -n +n ：按文件更改时间来查找文件，-n指 n天以内，+n指 n天前</p>
<p> -atime -n +n ： 按文件访问时间来查找</p>
<p> -ctime -n +n : 按照文件创建时间来查找</p>
<p>例如：</p>
<p>查找一天内新增的txt文件:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -ctime 0 -name &quot;.*txt&quot;</span><br></pre></td></tr></table></figure>

<p>查找3天内新增的txt文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -ctime -3 -name &quot;*.txt&quot;</span><br></pre></td></tr></table></figure>

<p>查看目录按照时间排序：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -alt | head -n 10 (查看前10条的内容)</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202305192359009.png" alt="image-20230519235931972"></p>
<p>对文件的创建时间、修改时间、访问时间进行排查</p>
<p>使用 stat 命令可以查看文件详细信息，若修改时间距离应急响应事件日期接近，有线性关联，说明有可能被篡改</p>
<h5 id="linux特殊文件"><a href="#linux特殊文件" class="headerlink" title="linux特殊文件"></a>linux特殊文件</h5><p>特殊权限文件查找：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /tmp -perm 777 </span><br></pre></td></tr></table></figure>

<p>webshell查找：webshell排查可以通过文件、流量、日志分析，基于文件的命名特征和内容特征，相对操作性较高。</p>
<p>例如查找&#x2F;var&#x2F;www下所有php文件 ：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /var/www/ -name &quot;*.php&quot;</span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /var/www/ -name &quot;*.php&quot; | xargs egrep  &quot;assert|eval|base64_decode|shell_exec|passthru|\(\$\_\POST\[&quot;</span><br></pre></td></tr></table></figure>

<h3 id="webshell"><a href="#webshell" class="headerlink" title="webshell"></a>webshell</h3><h4 id="Windows-8"><a href="#Windows-8" class="headerlink" title="Windows"></a>Windows</h4><p>webshell（网站入侵脚本）可以通过上述方法筛选之后，再进一步排查，还可以使用D 盾、HwsKill、webshellKill等工具对目录下的文件进行规则查询</p>
<h2 id="日志分析"><a href="#日志分析" class="headerlink" title="日志分析"></a>日志分析</h2><h3 id="Windows-9"><a href="#Windows-9" class="headerlink" title="Windows"></a>Windows</h3><p>windows中，日志文件包括：系统日志、安全性日志及应用程序日志，对于应急响应工程师来说这三类日志需要熟练掌握。</p>
<p>windows XP&#x2F;windows server 2003，日志位置如下：</p>
<p>系统日志：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\System32\config\SysEvent.evt </span><br></pre></td></tr></table></figure>

<p>安全性日志：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\System32\config\SecEvent.evt </span><br></pre></td></tr></table></figure>

<p>应用程序日志：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\System32\config\AppEvnet.evt</span><br></pre></td></tr></table></figure>

<p>windows vista&#x2F;windows 7&#x2F;windows8&#x2F;windows10&#x2F;Windows server2008之后，日志位置：</p>
<p>系统日志为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\System32\winevt\Logs\System.evtx </span><br></pre></td></tr></table></figure>

<p>安全性日志为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\System32\winevt\Logs\Security.evtx </span><br></pre></td></tr></table></figure>

<p>应用程序日志为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\System32\winevt\Logs\Application.evtx </span><br></pre></td></tr></table></figure>

<p>或者打开”运行“，输入 eventvwr.msc</p>
<h4 id="系统日志"><a href="#系统日志" class="headerlink" title="系统日志"></a>系统日志</h4><p>系统日志指windows系统中的各个组件在运行中产生的各种事件，这些事件一般可以分为：系统中各种驱动程序在运行中出现的重大问题、操作系统的多种组件在运行中出现重大问题及应用软件在运行中出现的重大问题等，这些重大问题主要包括重要数据的丢失、错误，以及系统产生的崩溃行为等</p>
<h4 id="安全性日志"><a href="#安全性日志" class="headerlink" title="安全性日志"></a>安全性日志</h4><p>安全性日志与系统日志不同，安全性日志主要记录了各种与安全相关的事件。构成该日志的内容主要包括：各种登录与退出系统的成功或不成功的信息；对系统中各种重要资源进行的各种操作，如对系统文件进行创建、删除、更改等操作</p>
<h4 id="应用程序日志"><a href="#应用程序日志" class="headerlink" title="应用程序日志"></a>应用程序日志</h4><p>应用程序日志主要记录各种应用程序产生的各类事件，例如系统中的SQL server数据库程序在受到暴力破解攻击时，日志会有相关记录，该记录中包含对应事件相关的详细信息</p>
<h4 id="其他日志"><a href="#其他日志" class="headerlink" title="其他日志"></a>其他日志</h4><p>在应急响应中经常也会用到 PowerShell 日志</p>
<h4 id="日志分析-1"><a href="#日志分析-1" class="headerlink" title="日志分析"></a>日志分析</h4><p>日志分析就是在众多日志中找出自己需要的日志</p>
<p>（1）通过内置的日志筛选器进行分析：使用日志筛选器可以对记录时间、事件级别、任务类别、关键字等信息进行筛选</p>
<p>（2）使用 Powershell 对日志进行分析</p>
<p>在使用powershell进行日志分析时，需要管理员权限，常用的命令：</p>
<ul>
<li>Get-EventLog：只获取传统事件日志</li>
<li>Get-WinEvent：从传统事件日志和新windows 事件日志技术生成的事件日志中获取事件 ，还会获取windows 事件跟踪（ETW）生成的日志文件中的事件，需要windows vista&#x2F;windows server2008及更高版本的windows系统，还需要 .NET Framework 3.5 及以上版本<br>例如获取安全性日志下事件ID为4624（登录成功）的所有日志信息：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get-eventlog security -instanceid 4624</span><br></pre></td></tr></table></figure>

<p>• 例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get-winevent -filterhashtable @&#123;logname=&#x27;security&#x27;;id=&#x27;4624&#x27;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="linux-7"><a href="#linux-7" class="headerlink" title="linux"></a>linux</h3><p>linux系统中日志一般存放在目录 &#x2F;var&#x2F;log&#x2F; 下，具体功能如下：</p>
<ul>
<li><p>&#x2F;var&#x2F;log&#x2F;wtmp：记录登录进入、退出、数据交换、关机和重启,即last，是一个二进制文件，可以使用last查看</p>
</li>
<li><p>&#x2F;var&#x2F;log&#x2F;cron：记录与定时任务相关的日志信息</p>
</li>
<li><p>&#x2F;var&#x2F;log&#x2F;messages：记录系统启动后的信息和错误日志，cat &#x2F;var&#x2F;log&#x2F;messages</p>
</li>
<li><p>&#x2F;var&#x2F;log&#x2F;apache2&#x2F;access.log：记录Apache的访问日志</p>
</li>
<li><p>&#x2F;var&#x2F;log&#x2F;auth.log：记录系统授权信息，包括用户登录和使用的权限机制等</p>
</li>
<li><p>&#x2F;var&#x2F;log&#x2F;userlog: 记录所有等级用户信息的日志</p>
</li>
<li><p>&#x2F;var&#x2F;log&#x2F;xferlog(vsftpd.log):记录linux FTP的日志</p>
</li>
<li><p>&#x2F;var&#x2F;log&#x2F;lastlog: 记录登录的用户，可以使用命令lastlog查看，</p>
</li>
<li><p>&#x2F;var&#x2F;log&#x2F;secure : 记录大多数应用输入的账户和密码，以及登录成功与否</p>
</li>
<li><p>&#x2F;var&#x2F;log&#x2F;faillog: 记录登录系统不成功的账号信息</p>
</li>
<li><p>ls -alt &#x2F;var&#x2F;spool&#x2F;mail ： 查看邮件相关记录文件</p>
</li>
<li><p>cat &#x2F;var&#x2F;spool&#x2F;mail&#x2F;root ：可发现对80端口的攻击行为（当web访问异常时，及时向当前系统配置的邮箱地址发送报警邮件）</p>
</li>
</ul>
<p>对linux系统日志分析主要使用 grep sed sort awk 等命令</p>
<p>查看最后10行日志 :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -n 10 test.log</span><br></pre></td></tr></table></figure>

<p>查看10之后的所有日志</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -n +10 test.log</span><br></pre></td></tr></table></figure>

<p>查询头10行的日志</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head -n 10 test.log</span><br></pre></td></tr></table></figure>

<p>查询除了最后10条的所有日志</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head -n -10 test.log</span><br></pre></td></tr></table></figure>

<p>其他日志<br>1、IIS日志的位置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">%SystemDrive%\inetpub\logs\LogsFiles </span><br><span class="line">%SystemRoot%\System32\LogFiles\W3SVC1 </span><br><span class="line">%SystemDrive%\inetpub\logs\LogFiles\W3SVC1 </span><br><span class="line">%SystemDrive%\Windows\System32\LogFiles\HTTPERR</span><br></pre></td></tr></table></figure>

<p>2、Apache日志的位置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/var/log/httpd/access.log </span><br><span class="line">/var/log/apache/access.log </span><br><span class="line">/var/log/apache2/access.log </span><br><span class="line">/var/log/httpd-access.log</span><br></pre></td></tr></table></figure>

<p>3、Nginx日志位置</p>
<p>默认在 &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;logs 目录下，accessl.log 代表访问日志，error.log 代表错误日志，若没有在默认路径下，则可以到 nginx.conf 配置文件中查找</p>
<p>4、Tomcat日志的位置</p>
<p>默认在 TOMCAT_HOME&#x2F;logs&#x2F;目录下，有 catalina.out、catalina.YYYY-MM-DD.log 、 localhost.YYYY-MM-DD.log、 localhost_access_log.YYYY-MM-DD.txt、hostmanager.YYYY-MM-DD.log、manager.YYYY-MM-DD.log 等几类日志</p>
<p>5、Weblogic日志的位置</p>
<p>在默认情况下，WebLogic 有三种日志，分别是 access log 、 server log 和 domain log</p>
<p>access log 的位置是</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$MW_HOME\user_projects\domains\&lt;domain_name&gt;\server\&lt;server_name&gt;\logs</span><br><span class="line">\access.log</span><br></pre></td></tr></table></figure>

<p>server log 的位置是</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$MW_HOME\user_projects\domains\&lt;domain_name&gt;\server\&lt;server_name&gt;\logs</span><br><span class="line">\&lt;server_name&gt;.log</span><br></pre></td></tr></table></figure>

<p>domain log 的位置是</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$MW_HOME\user_projects\domains\&lt;domain_name&gt;\server\&lt;adminserver_name</span><br><span class="line">&gt;\logs\&lt;domain_name&gt;.log</span><br></pre></td></tr></table></figure>

<p>6、数据库日志</p>
<p>Oracle数据库查看方法如下：使用 select * from v$logfile 命令，可查询日志路径，在默认情况下，日志文件记录在 $ORACLE&#x2F;rdbms&#x2F;log 。 使用 select * from v$sql 命令，查询之前用过的SQL</p>
<p>MySQL 数据库查看方法如下：使用 show variables like ‘%log_%’ 命令，可查看是否启用日志，如果日志已开启，则默认路径为 &#x2F;var&#x2F;log&#x2F;mysql ，使用 show variables like ‘%general%’ 命令，可查看日志位置</p>
<p>MsSQL 数据库查看方法如下：一般无法直接查看，需要登录到 SQL Server Management Studio ，在 “管理-SQL Server 日志” 中进行查看</p>
<h1 id="应急响应工具箱"><a href="#应急响应工具箱" class="headerlink" title="应急响应工具箱"></a>应急响应工具箱</h1><h2 id="多引擎在线病毒扫描"><a href="#多引擎在线病毒扫描" class="headerlink" title="多引擎在线病毒扫描"></a>多引擎在线病毒扫描</h2><p>使用多个不同的病毒引擎进行扫描检测，确认可疑文件是否是恶意代码</p>
<p>VirSCAN：免费多引擎在线病毒扫描1.02 版，支持47个杀毒引擎： <a target="_blank" rel="noopener" href="https://www.virscan.org/">https://www.virscan.org/</a></p>
<p>VirusTotal：一个提供免费的可疑文件分析服务的网站：<a target="_blank" rel="noopener" href="https://www.virustotal.com/">https://www.virustotal.com/</a></p>
<p>Jotti：恶意软件扫描系统，使用几个反病毒程序进行扫描可疑文件： <a target="_blank" rel="noopener" href="https://virusscan.jotti.org/">https://virusscan.jotti.org</a></p>
<p>ScanVir：一个免费网站，针对计算机病毒、手机病毒、可疑文件等进行检测和分析： <a target="_blank" rel="noopener" href="http://www.scanvir.com/">http://www.scanvir.com</a></p>
<h2 id="病毒查杀软件"><a href="#病毒查杀软件" class="headerlink" title="病毒查杀软件"></a>病毒查杀软件</h2><p>联网状态下，直接下载杀毒软件进行全盘扫描查杀</p>
<p>360杀毒：整合了五大领先查杀引擎，杀毒查杀率比较高：<a target="_blank" rel="noopener" href="https://sd.360.cn/">https://sd.360.cn/</a></p>
<p>火绒安全软件：一款非常精致的软件，包含了火绒剑，安全专业人士很好用的分析工具： <a target="_blank" rel="noopener" href="https://www.huorong.cn/">https://www.huorong.cn/</a></p>
<p>ClamAV：用于检测木马&#x2F;病毒&#x2F;恶意软件和其他恶意威胁的一个开源杀毒引擎，检测Linux 病毒：<a target="_blank" rel="noopener" href="http://www.clamav.net/download.html">http://www.clamav.net/download.html</a></p>
<h2 id="病毒清除工具"><a href="#病毒清除工具" class="headerlink" title="病毒清除工具"></a>病毒清除工具</h2><p>无法联网时，可使用绿色免安装的病毒清除工具，扫描电脑中的所有文件</p>
<p>Dr.Web CureIt：绿色免安装版本，具有单机版Dr.Web的所有功能： <a target="_blank" rel="noopener" href="https://free.drweb.ru/download+cureit+free/">https://free.drweb.ru/download+cureit+free/</a></p>
<p>卡巴斯基：官方免费绿色版卡巴斯基杀毒软件：<a target="_blank" rel="noopener" href="http://devbuilds.kasperskylabs.com/devbuilds/KVRT/latest/full/KVRT.exe">http://devbuilds.kasperskylabs.com/devbuilds/KVRT/latest/full/KVRT.exe</a></p>
<p>Rootkit后门检测工具：用于在本地检查rootkit后面的工具：</p>
<p>chkrootkit：<a target="_blank" rel="noopener" href="http://www.chkrootkit.org/">http://www.chkrootkit.org</a></p>
<p>rkhunter：<a target="_blank" rel="noopener" href="http://rkhunter.sourceforge.net/">http://rkhunter.sourceforge.net</a></p>
<h2 id="勒索病毒搜索引擎"><a href="#勒索病毒搜索引擎" class="headerlink" title="勒索病毒搜索引擎"></a>勒索病毒搜索引擎</h2><p>勒索病毒自救最有力的工具，输入病毒名或加密文件后缀名，就可以找到解密工具或者了解病毒详情</p>
<p>腾讯勒索病毒搜索引擎，支持检索支持检索超过 1000+ 种常见勒索病毒： <a target="_blank" rel="noopener" href="https://guanjia.qq.com/pr/ls/">https://guanjia.qq.com/pr/ls/</a></p>
<p>360勒索病毒搜索引擎，支持检索超过上800种常见勒索病毒： <a target="_blank" rel="noopener" href="http://lesuobingdu.360.cn/">http://lesuobingdu.360.cn</a></p>
<p>启明VenusEye勒索病毒搜索引擎，超300种勒索病毒家族： <a target="_blank" rel="noopener" href="https://lesuo.venuseye.com.cn/">https://lesuo.venuseye.com.cn/</a></p>
<p>奇安信勒索病毒搜索引擎：<a target="_blank" rel="noopener" href="https://lesuobingdu.qianxin.com/">https://lesuobingdu.qianxin.com/</a></p>
<p>深信服勒索病毒搜索引擎： <a target="_blank" rel="noopener" href="https://edr.sangfor.com.cn/#/information/ransom_search">https://edr.sangfor.com.cn/#/information/ransom_search</a></p>
<h2 id="Webshell检测工具"><a href="#Webshell检测工具" class="headerlink" title="Webshell检测工具"></a>Webshell检测工具</h2><p>网站被入侵时，我们需要一款Webshell检测工具，来帮助我们发现webshell，进一步排查系统可能存在的安全漏洞</p>
<p>D盾_Web查杀：<a target="_blank" rel="noopener" href="http://www.d99net.net/index.asp">http://www.d99net.net/index.asp</a></p>
<p>百度WEBDIR+：<a target="_blank" rel="noopener" href="https://scanner.baidu.com/">https://scanner.baidu.com/</a></p>
<p>河马webshell查杀：<a target="_blank" rel="noopener" href="http://www.shellpub.com/">http://www.shellpub.com</a></p>
<p>Web Shell Detector：<a target="_blank" rel="noopener" href="http://www.shelldetector.com/">http://www.shelldetector.com/</a></p>
<h2 id="在线沙箱"><a href="#在线沙箱" class="headerlink" title="在线沙箱"></a>在线沙箱</h2><p>Any.Run：<a target="_blank" rel="noopener" href="https://app.any.run/">https://app.any.run/</a></p>
<p>微步云沙箱：<a target="_blank" rel="noopener" href="https://s.threatbook.cn/">https://s.threatbook.cn/</a></p>
<p>VirusTotal：<a target="_blank" rel="noopener" href="https://www.virustotal.com/gui/">https://www.virustotal.com/gui/</a></p>
<p>Joe Sanbox:<a target="_blank" rel="noopener" href="https://www.joesandbox.com/">https://www.joesandbox.com/</a></p>
<p>腾讯哈勃分析系统：<a target="_blank" rel="noopener" href="https://habo.qq.com/">https://habo.qq.com/</a></p>
<p>360沙箱云：<a target="_blank" rel="noopener" href="https://ata.360.cn/detection">https://ata.360.cn/detection</a></p>
<p>奇安信沙箱：<a target="_blank" rel="noopener" href="https://sandbox.ti.qianxin.com/sandbox/page">https://sandbox.ti.qianxin.com/sandbox/page</a></p>
<p>微点沙箱：<a target="_blank" rel="noopener" href="https://sandbox.depthsec.com.cn/index.php/">https://sandbox.depthsec.com.cn/index.php/</a></p>
<p>魔盾安全分析：<a target="_blank" rel="noopener" href="https://www.maldun.com/analysis/">https://www.maldun.com/analysis/</a></p>
<p>大圣云沙箱：<a target="_blank" rel="noopener" href="https://mac-cloud.riskivy.com/">https://mac-cloud.riskivy.com</a></p>
<h2 id="安全分析工具"><a href="#安全分析工具" class="headerlink" title="安全分析工具"></a>安全分析工具</h2><p>SysinternalsSuite：包含一系列免费的系统分析工具，如Process Explorer、启动项分析工具 AutoRuns等：<a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/sysinternals/downloads/">https://docs.microsoft.com/zh-cn/sysinternals/downloads/</a></p>
<p>PCHunter：一款强大的手工杀毒辅助工具：<a target="_blank" rel="noopener" href="http://www.xuetr.com/">http://www.xuetr.com</a></p>
<p>Process Hacker：一个免费，功能强大的多功能工具，可帮助您监视系统资源，调试软件和检测恶意软件：<a target="_blank" rel="noopener" href="https://processhacker.sourceforge.io/">https://processhacker.sourceforge.io/</a></p>
<p>SysInspector：一个免费的系统安全检测工具： <a target="_blank" rel="noopener" href="http://download.eset.com.cn/download/detail/?product=sysinspector">http://download.eset.com.cn/download/detail/?product=sysinspector</a></p>
<p>RegShot：注册表对比工具：<a target="_blank" rel="noopener" href="https://sourceforge.net/projects/regshot/">https://sourceforge.net/projects/regshot/</a></p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202303232356277.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202303232356277.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">hihopkc</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://hihopkc.github.io/posts/12923.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://hihopkc.github.io/posts/12923.html')">应急响应</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://hihopkc.github.io/posts/12923.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=应急响应&amp;url=https://hihopkc.github.io/posts/12923.html&amp;pic=/img/default_cover.jpg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://hihopkc.github.io" target="_blank">嘻哈磕碜のBlogs</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"></div></div></div><div class="post_share"><div class="social-share" data-image="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202404092014272.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/38668.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">信息收集</div></div></a></div><div class="next-post pull-right"><a href="/posts/62582.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202312192016990.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Metasploit渗透框架</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202303232356277.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" ait="status"/></div></div><div class="author-info__description">站在巨人的肩上</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">hihopkc</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/hihopkc" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/56853573" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客鸭~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%EF%BC%9F"><span class="toc-number">1.</span> <span class="toc-text">什么是应急响应？</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%92%8C%E6%84%8F%E4%B9%89"><span class="toc-number">1.1.</span> <span class="toc-text">作用和意义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E5%8D%95%E4%BD%8D"><span class="toc-number">1.2.</span> <span class="toc-text">相关单位</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%95%E5%BE%8B%E6%B3%95%E8%A7%84"><span class="toc-number">1.3.</span> <span class="toc-text">法律法规</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%BA%A7%E5%88%AB"><span class="toc-number">1.4.</span> <span class="toc-text">事件级别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.5.</span> <span class="toc-text">事件类型</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E6%A8%A1%E5%9E%8B-PDCERF"><span class="toc-number">2.</span> <span class="toc-text">应急响应模型(PDCERF)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#01-%E5%87%86%E5%A4%87%E9%98%B6%E6%AE%B5"><span class="toc-number">2.1.</span> <span class="toc-text">01 准备阶段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#02-%E6%A3%80%E6%B5%8B%E9%98%B6%E6%AE%B5"><span class="toc-number">2.2.</span> <span class="toc-text">02 检测阶段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#03-%E6%8A%91%E5%88%B6%E9%98%B6%E6%AE%B5"><span class="toc-number">2.3.</span> <span class="toc-text">03 抑制阶段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#04-%E6%A0%B9%E9%99%A4%E9%98%B6%E6%AE%B5"><span class="toc-number">2.4.</span> <span class="toc-text">04 根除阶段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#05-%E6%81%A2%E5%A4%8D%E9%98%B6%E6%AE%B5"><span class="toc-number">2.5.</span> <span class="toc-text">05 恢复阶段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#06-%E6%80%BB%E7%BB%93%E9%98%B6%E6%AE%B5"><span class="toc-number">2.6.</span> <span class="toc-text">06 总结阶段</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%A2%E9%98%9F%E7%BB%84%E5%BB%BA"><span class="toc-number">3.</span> <span class="toc-text">团队组建</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E4%BA%A7%E5%93%81"><span class="toc-number">4.</span> <span class="toc-text">安全产品</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E4%BA%A7%E5%93%81%E7%94%A8%E9%80%94%E5%88%86%E7%B1%BB"><span class="toc-number">4.1.</span> <span class="toc-text">安全产品用途分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%B2%E7%81%AB%E5%A2%99%EF%BC%88Firewall%EF%BC%89"><span class="toc-number">4.2.</span> <span class="toc-text">防火墙（Firewall）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%97DDoS%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">4.3.</span> <span class="toc-text">抗DDoS防火墙</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E9%97%B8%EF%BC%88GAP%EF%BC%89"><span class="toc-number">4.4.</span> <span class="toc-text">网闸（GAP）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91%E7%BB%9C%EF%BC%88VPN%EF%BC%89"><span class="toc-number">4.5.</span> <span class="toc-text">虚拟专用网络（VPN）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A5%E4%BE%B5%E6%A3%80%E6%B5%8B%E7%B3%BB%E7%BB%9F%EF%BC%88IDS%EF%BC%89"><span class="toc-number">4.6.</span> <span class="toc-text">入侵检测系统（IDS）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A5%E4%BE%B5%E9%98%B2%E5%BE%A1%E7%B3%BB%E7%BB%9F%EF%BC%88IPS%EF%BC%89"><span class="toc-number">4.7.</span> <span class="toc-text">入侵防御系统（IPS）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WEB%E5%BA%94%E7%94%A8%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">4.8.</span> <span class="toc-text">WEB应用防火墙</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%A5%E4%BE%B5%E6%8E%92%E6%9F%A5"><span class="toc-number">5.</span> <span class="toc-text">入侵排查</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E6%8E%92%E6%9F%A5%E2%80%94%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF"><span class="toc-number">5.1.</span> <span class="toc-text">系统排查—基本信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows"><span class="toc-number">5.1.1.</span> <span class="toc-text">Windows</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linux"><span class="toc-number">5.1.2.</span> <span class="toc-text">linux</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF"><span class="toc-number">5.2.</span> <span class="toc-text">用户信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows-1"><span class="toc-number">5.2.1.</span> <span class="toc-text">Windows</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linux-1"><span class="toc-number">5.2.2.</span> <span class="toc-text">linux</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E9%A1%B9"><span class="toc-number">5.3.</span> <span class="toc-text">启动项</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows-2"><span class="toc-number">5.3.1.</span> <span class="toc-text">Windows</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linux-2"><span class="toc-number">5.3.2.</span> <span class="toc-text">linux</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1"><span class="toc-number">5.4.</span> <span class="toc-text">计划任务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows-3"><span class="toc-number">5.4.1.</span> <span class="toc-text">Windows</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux"><span class="toc-number">5.4.2.</span> <span class="toc-text">Linux</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E6%8E%92%E6%9F%A5"><span class="toc-number">5.5.</span> <span class="toc-text">进程排查</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows-4"><span class="toc-number">5.5.1.</span> <span class="toc-text">Windows</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8tasklist%E5%91%BD%E4%BB%A4"><span class="toc-number">5.5.1.1.</span> <span class="toc-text">使用tasklist命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-netstat-%E8%BF%9B%E8%A1%8C%E6%8E%92%E6%9F%A5"><span class="toc-number">5.5.1.2.</span> <span class="toc-text">通过 netstat 进行排查</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Powershell%E8%BF%9B%E8%A1%8C%E6%8E%92%E6%9F%A5"><span class="toc-number">5.5.1.3.</span> <span class="toc-text">使用Powershell进行排查</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#wmic%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.5.1.4.</span> <span class="toc-text">wmic查询</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linux-3"><span class="toc-number">5.5.2.</span> <span class="toc-text">linux</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E6%8E%92%E6%9F%A5"><span class="toc-number">5.6.</span> <span class="toc-text">服务排查</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows-5"><span class="toc-number">5.6.1.</span> <span class="toc-text">Windows</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linux-4"><span class="toc-number">5.6.2.</span> <span class="toc-text">linux</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%97%95%E8%BF%B9%E6%8E%92%E6%9F%A5"><span class="toc-number">5.7.</span> <span class="toc-text">文件痕迹排查</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%8F%E6%84%9F%E7%9B%AE%E5%BD%95"><span class="toc-number">5.7.1.</span> <span class="toc-text">敏感目录</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Windows-6"><span class="toc-number">5.7.1.1.</span> <span class="toc-text">Windows</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E7%94%A8%E6%88%B7Recent%E6%96%87%E4%BB%B6"><span class="toc-number">5.7.1.1.1.</span> <span class="toc-text">查看用户Recent文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%A2%84%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%A4%B9%E6%9F%A5%E7%9C%8B"><span class="toc-number">5.7.1.1.2.</span> <span class="toc-text">预读取文件夹查看</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#linux-5"><span class="toc-number">5.7.1.2.</span> <span class="toc-text">linux</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E7%82%B9"><span class="toc-number">5.7.2.</span> <span class="toc-text">时间点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Windows-7"><span class="toc-number">5.7.2.1.</span> <span class="toc-text">Windows</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#linux-6"><span class="toc-number">5.7.2.2.</span> <span class="toc-text">linux</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#linux%E7%89%B9%E6%AE%8A%E6%96%87%E4%BB%B6"><span class="toc-number">5.7.2.2.1.</span> <span class="toc-text">linux特殊文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webshell"><span class="toc-number">5.7.3.</span> <span class="toc-text">webshell</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Windows-8"><span class="toc-number">5.7.3.1.</span> <span class="toc-text">Windows</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90"><span class="toc-number">5.8.</span> <span class="toc-text">日志分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows-9"><span class="toc-number">5.8.1.</span> <span class="toc-text">Windows</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97"><span class="toc-number">5.8.1.1.</span> <span class="toc-text">系统日志</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E6%80%A7%E6%97%A5%E5%BF%97"><span class="toc-number">5.8.1.2.</span> <span class="toc-text">安全性日志</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%97%A5%E5%BF%97"><span class="toc-number">5.8.1.3.</span> <span class="toc-text">应用程序日志</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E6%97%A5%E5%BF%97"><span class="toc-number">5.8.1.4.</span> <span class="toc-text">其他日志</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90-1"><span class="toc-number">5.8.1.5.</span> <span class="toc-text">日志分析</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linux-7"><span class="toc-number">5.8.2.</span> <span class="toc-text">linux</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%B7%A5%E5%85%B7%E7%AE%B1"><span class="toc-number">6.</span> <span class="toc-text">应急响应工具箱</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%BC%95%E6%93%8E%E5%9C%A8%E7%BA%BF%E7%97%85%E6%AF%92%E6%89%AB%E6%8F%8F"><span class="toc-number">6.1.</span> <span class="toc-text">多引擎在线病毒扫描</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%97%85%E6%AF%92%E6%9F%A5%E6%9D%80%E8%BD%AF%E4%BB%B6"><span class="toc-number">6.2.</span> <span class="toc-text">病毒查杀软件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%97%85%E6%AF%92%E6%B8%85%E9%99%A4%E5%B7%A5%E5%85%B7"><span class="toc-number">6.3.</span> <span class="toc-text">病毒清除工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8B%92%E7%B4%A2%E7%97%85%E6%AF%92%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E"><span class="toc-number">6.4.</span> <span class="toc-text">勒索病毒搜索引擎</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Webshell%E6%A3%80%E6%B5%8B%E5%B7%A5%E5%85%B7"><span class="toc-number">6.5.</span> <span class="toc-text">Webshell检测工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E7%BA%BF%E6%B2%99%E7%AE%B1"><span class="toc-number">6.6.</span> <span class="toc-text">在线沙箱</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7"><span class="toc-number">6.7.</span> <span class="toc-text">安全分析工具</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/d344.html" title="【SRC】逻辑漏洞"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202404092014272.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【SRC】逻辑漏洞"/></a><div class="content"><a class="title" href="/posts/d344.html" title="【SRC】逻辑漏洞">【SRC】逻辑漏洞</a><time datetime="2024-04-09T08:34:44.000Z" title="发表于 2024-04-09 16:34:44">2024-04-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/3fac.html" title="【SRC】cors&amp;xss漏洞"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202404092014272.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【SRC】cors&amp;xss漏洞"/></a><div class="content"><a class="title" href="/posts/3fac.html" title="【SRC】cors&amp;xss漏洞">【SRC】cors&amp;xss漏洞</a><time datetime="2024-04-08T06:19:02.000Z" title="发表于 2024-04-08 14:19:02">2024-04-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/f659.html" title="【SRC】条件竞争(并发)"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202404092014272.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【SRC】条件竞争(并发)"/></a><div class="content"><a class="title" href="/posts/f659.html" title="【SRC】条件竞争(并发)">【SRC】条件竞争(并发)</a><time datetime="2024-04-07T08:08:39.000Z" title="发表于 2024-04-07 16:08:39">2024-04-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/fdd7.html" title="【SRC】未授权访问"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202404092014272.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【SRC】未授权访问"/></a><div class="content"><a class="title" href="/posts/fdd7.html" title="【SRC】未授权访问">【SRC】未授权访问</a><time datetime="2024-04-06T08:33:16.000Z" title="发表于 2024-04-06 16:33:16">2024-04-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/ce35.html" title="【SRC】越权漏洞"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202404092014272.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【SRC】越权漏洞"/></a><div class="content"><a class="title" href="/posts/ce35.html" title="【SRC】越权漏洞">【SRC】越权漏洞</a><time datetime="2024-04-05T13:41:41.000Z" title="发表于 2024-04-05 21:41:41">2024-04-05</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:975025272@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://hihopkc-blog.oss-cn-shenzhen.aliyuncs.com/img/202303232356277.png" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/hihopkc" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2023 - 2024 By <a class="footer-bar-link" href="/" title="hihopkc" target="_blank">hihopkc</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">141</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">29</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">34</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/ChatGpt/" style="font-size: 0.88rem;">ChatGpt<sup>2</sup></a><a href="/tags/Java/" style="font-size: 0.88rem;">Java<sup>1</sup></a><a href="/tags/MISC/" style="font-size: 0.88rem;">MISC<sup>2</sup></a><a href="/tags/MSF/" style="font-size: 0.88rem;">MSF<sup>1</sup></a><a href="/tags/Navicat/" style="font-size: 0.88rem;">Navicat<sup>1</sup></a><a href="/tags/Web%E5%AE%89%E5%85%A8/" style="font-size: 0.88rem;">Web安全<sup>9</sup></a><a href="/tags/binwalk/" style="font-size: 0.88rem;">binwalk<sup>1</sup></a><a href="/tags/docker/" style="font-size: 0.88rem;">docker<sup>4</sup></a><a href="/tags/hash/" style="font-size: 0.88rem;">hash<sup>1</sup></a><a href="/tags/hydra/" style="font-size: 0.88rem;">hydra<sup>1</sup></a><a href="/tags/java/" style="font-size: 0.88rem;">java<sup>1</sup></a><a href="/tags/john/" style="font-size: 0.88rem;">john<sup>1</sup></a><a href="/tags/mysql/" style="font-size: 0.88rem;">mysql<sup>1</sup></a><a href="/tags/oracle/" style="font-size: 0.88rem;">oracle<sup>1</sup></a><a href="/tags/owasp/" style="font-size: 0.88rem;">owasp<sup>1</sup></a><a href="/tags/phpstudy/" style="font-size: 0.88rem;">phpstudy<sup>1</sup></a><a href="/tags/python/" style="font-size: 0.88rem;">python<sup>1</sup></a><a href="/tags/redis/" style="font-size: 0.88rem;">redis<sup>1</sup></a><a href="/tags/shiro/" style="font-size: 0.88rem;">shiro<sup>1</sup></a><a href="/tags/sql/" style="font-size: 0.88rem;">sql<sup>1</sup></a><a href="/tags/ssrf/" style="font-size: 0.88rem;">ssrf<sup>1</sup></a><a href="/tags/tomcat/" style="font-size: 0.88rem;">tomcat<sup>1</sup></a><a href="/tags/wpscan/" style="font-size: 0.88rem;">wpscan<sup>1</sup></a><a href="/tags/xss/" style="font-size: 0.88rem;">xss<sup>2</sup></a><a href="/tags/%E5%AE%B9%E5%99%A8/" style="font-size: 0.88rem;">容器<sup>1</sup></a><a href="/tags/%E5%BC%B1%E5%8F%A3%E4%BB%A4/" style="font-size: 0.88rem;">弱口令<sup>1</sup></a><a href="/tags/%E6%8A%A4%E7%BD%91/" style="font-size: 0.88rem;">护网<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 0.88rem;">数据库<sup>2</sup></a><a href="/tags/%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/" style="font-size: 0.88rem;">测试工具<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/medium-zoom@1.0.8/dist/medium-zoom.min.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.4/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("02/18/2023 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `你好，欢迎你来到我的博客!`,
    `保持热爱，奔赴山海✨`,
    `
        
    ██╗  ██╗██╗██╗  ██╗ ██████╗ ██████╗ ██╗  ██╗ ██████╗
    ██║  ██║██║██║  ██║██╔═══██╗██╔══██╗██║ ██╔╝██╔════╝
    ███████║██║███████║██║   ██║██████╔╝█████╔╝ ██║     
    ██╔══██║██║██╔══██║██║   ██║██╔═══╝ ██╔═██╗ ██║     
    ██║  ██║██║██║  ██║╚██████╔╝██║     ██║  ██╗╚██████╗
    ╚═╝  ╚═╝╚═╝╚═╝  ╚═╝ ╚═════╝ ╚═╝     ╚═╝  ╚═╝ ╚═════╝
        
    `,
    "已上线",
    dnum,
    "天",
    "©2023 By hihopkc V1.6.9",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小丑】.`, `Photo captured: `, `🤣👉🏻🤡`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小丑.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 hihopkc 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="https://cdn.cbd.int/algoliasearch@4.18.0/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.cbd.int/instantsearch.js@4.56.5/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://hihopkc.space/',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.21/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://hihopkc.space/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://hihopkc.space/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.21/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "visitor@anheyu.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script type="text/javascript" src="/js/fps.js"></script><div id="fps"></div><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>